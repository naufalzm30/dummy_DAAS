(function(t){function a(a){for(var s,r,o=a[0],l=a[1],c=a[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(a);while(m.length)m.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var t,a=0;a<n.length;a++){for(var e=n[a],s=!0,o=1;o<e.length;o++){var l=e[o];0!==i[l]&&(s=!1)}s&&(n.splice(a--,1),t=r(r.s=e[0]))}return t}var s={},i={app:0},n=[];function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=s,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)r.d(e,s,function(a){return t[a]}.bind(null,s));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var d=l;n.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"01f0":function(t,a,e){"use strict";e("fcc0")},"034f":function(t,a,e){"use strict";e("85ec")},"0408":function(t,a,e){"use strict";e("6535")},"0b4f":function(t,a,e){},"0ed1":function(t,a,e){t.exports=e.p+"img/upload.25cc5067.svg"},"11be":function(t,a,e){},"123d":function(t,a,e){"use strict";e("11be")},1353:function(t,a,e){t.exports=e.p+"img/detail.d95f161c.svg"},1678:function(t,a,e){"use strict";e("914d")},"190c":function(t,a,e){},"1ba3":function(t,a,e){"use strict";e("3318")},"1ce3":function(t,a,e){"use strict";e("7542")},"1f0e":function(t,a,e){"use strict";e("95f2")},"1f8e":function(t,a,e){"use strict";e("512d")},2058:function(t,a,e){t.exports=e.p+"img/box 1.3af19a8c.svg"},2154:function(t,a,e){"use strict";e("ed34")},2368:function(t,a,e){t.exports=e.p+"img/user.98f6f3e6.svg"},"24af":function(t,a,e){"use strict";e("5c03")},2651:function(t,a,e){},"2b7c":function(t,a,e){},"2f9e":function(t,a,e){"use strict";e("87e0")},3318:function(t,a,e){},3329:function(t,a,e){"use strict";e("e491")},"355f":function(t,a,e){t.exports=e.p+"img/arr.cfe7a89b.svg"},"3c7e":function(t,a,e){"use strict";e("6eea")},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var a=n(t);return e(a)}function n(t){if(!e.o(s,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},"4edd":function(t,a,e){"use strict";e("2b7c")},"4f35":function(t,a,e){"use strict";e("5619")},"512d":function(t,a,e){},5448:function(t,a,e){"use strict";e("2651")},5619:function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",staticStyle:{padding:"0"}},[e("router-view")],1)},n=[],r={},o=r,l=(e("034f"),e("2877")),c=Object(l["a"])(o,i,n,!1,null,null,null),d=c.exports,u=e("8c4f"),m=(e("d3b7"),e("e9c4"),e("2f62")),p=e("bc3a"),f=e.n(p),v=f.a.create({baseURL:"https://flowmeter.pdam-sby.go.id/api"});s["a"].use(m["a"]);var h,g,b,_,y,C,x,w,S=new m["a"].Store({state:{accessToken:localStorage.getItem("access")||"",status:"",isLoggedIn:!1,loginTime:null,userStationList:[]},mutations:{updateStorage:function(t,a){var e=a.access;t.accessToken=e},destroyToken:function(t){t.accessToken=null},setUserStationList:function(t,a){t.userStationList=a}},getters:{isAuthenticated:function(t){return!!t.accessToken},authStatus:function(t){return t.status},loggedIn:function(t){return null!=t.accessToken},getUserStationList:function(t){return t.userStationList}},actions:{updateUserStationList:function(t,a){var e=t.commit;e("setUserStationList",a)},userLogin:function(t,a){return new Promise((function(e,s){v.post("/signin/",{username:a.username,password:a.password}).then((function(a){localStorage.setItem("access",a.data.tokens.access),localStorage.setItem("userRole",a.data.role.role_name),localStorage.setItem("produksi",a.data.balai.balai_name),localStorage.setItem("user-daas",JSON.stringify(a.data)),t.commit("updateStorage",{access:a.data.tokens}),t.state.loginTime=(new Date).getTime(),t.state.isLoggedIn=!0,e()})).catch((function(t){localStorage.removeItem("access"),s(t)}))}))},userLogout:function(t){t.state.isLoggedIn=!1,t.commit("destroyToken"),localStorage.removeItem("access"),localStorage.removeItem("user-daas"),localStorage.removeItem("userRole"),localStorage.removeItem("produksi"),zs.push({name:"Home"}),location.reload()}}}),D=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mobile-width"},[e("Header"),t.loading_i?e("div",{staticClass:"center-container mt-2"},[t._m(0)]):e("div",[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.balai_name)+" ")]),e("Map"),e("Footer")],1)],1)},A=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-container"},[e("div",{staticClass:"icon-container"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem"}})]),e("p",{staticClass:"mt-3"},[t._v("Fetching data, please wait...")])])}],k=e("1da1"),z=(e("96cf"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"nav"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isMobileView,expression:"isMobileView"}],staticClass:"p-2",staticStyle:{background:"#68C0FF"}},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isMobileView,expression:"isMobileView"}],staticClass:"toggle-button",on:{click:function(a){return t.toggleSidebar()}}},[e("span",{class:t.className}),e("span",{class:t.className}),e("span",{class:t.className})])]),t.isMobileView?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMobileView||t.sidebarOpen,expression:"!isMobileView || sidebarOpen"}],class:{sidebar:!0,"sidebar-open":t.sidebarOpen},staticStyle:{"z-index":"1000"},attrs:{id:"mySidebar"}},[e("ul",[e("li",{staticClass:"centered-image"},[e("img",{staticClass:"mobile-icon",staticStyle:{"max-width":"50px"},attrs:{src:t.logoPDAM}})]),"SuperAdmin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("SADM")]):"Admin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("ADM")]):"Guest"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("TAMU")]):"APPROVAL"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("APPROVAL")]):"QA"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("QA")]):t._e(),"Admin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v(t._s(this.user.balai.balai_name))]):t._e(),e("li",{staticClass:"my-1 mt-3"},[e("router-link",{staticClass:"active",staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Home",params:{balai_id:this.balai}},"aria-current":"page"}},[e("img",{staticClass:"mr-4",attrs:{src:t.dash_i}}),e("span",[t._v("Dashboard")])])],1),t.accessToken?e("li"):e("div",[e("li",{staticClass:"my-1"},[e("hr",{staticStyle:{color:"white"}}),e("router-link",{staticStyle:{display:"flex","flex-direction":"row","z-index":"100"},attrs:{to:{name:"Login",params:{balai_id:this.balai}}}},[e("img",{staticClass:"mr-4",attrs:{src:t.login_i}}),e("span",[t._v("Sign In")])])],1)]),t.accessToken?e("li",{staticClass:"nav-item my-1"},[e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Station",params:{balai_id:this.balai,user_id:t.user_id}}}},[e("img",{staticClass:"mr-4",attrs:{src:t.stat_i}}),e("span",[t._v("Stasiun")])])],1):t._e(),t.accessToken?e("li",{staticClass:"nav-item my-1"},["SuperAdmin"==this.user.role.role_name?e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"User"}}},[e("img",{staticClass:"mr-4",attrs:{src:t.user_i}}),e("span",[t._v("User")])]):t._e()],1):t._e(),e("hr",{staticStyle:{color:"white"}}),t.accessToken?e("li",{staticClass:"nav-item my-1"},["SuperAdmin"==this.user.role.role_name?e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Notification"}}},[e("img",{staticClass:"mr-4",attrs:{src:t.notif_i}}),e("span",[t._v("Notifikasi")])]):t._e()],1):t._e(),t.accessToken?e("li",{staticClass:"my-1"},[e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Logout"}}},[e("img",{staticClass:"mr-4",attrs:{src:t.login_i}}),e("span",[t._v("Sign Out")])])],1):t._e()])]):e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMobileView||t.sidebarOpen,expression:"!isMobileView || sidebarOpen"}],class:{sidebar:!0,"sidebar-open":t.sidebarOpen},staticStyle:{"z-index":"91000"},attrs:{id:"mySidebar"},on:{mouseover:function(a){return t.toggleSidebar()},mouseleave:function(a){return t.toggleOut()}}},[e("ul",[e("li",{staticClass:"centered-image"},[e("img",{staticClass:"mobile-icon",staticStyle:{"max-width":"50px"},attrs:{src:t.logoPDAM}})]),"SuperAdmin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("SADM ")]):"Admin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("ADM")]):"Guest"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("TAMU")]):"APPROVAL"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("APPROVAL")]):"QA"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("QA")]):"Direksi"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v("Direksi")]):e("li",{staticClass:"centered-image",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v(t._s(this.user.username))]),"Admin"==this.user.role.role_name?e("li",{staticClass:"centered-image pt-2",staticStyle:{"font-size":"0.7rem",color:"#092581"}},[t._v(t._s(this.user.balai.balai_name))]):t._e(),e("li",{staticClass:"my-1 mt-3"},[e("router-link",{staticClass:"active",staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Home",params:{balai_id:this.balai}},"aria-current":"page"}},[e("img",{staticClass:"mr-4",attrs:{src:t.dash_i}}),e("span",[t._v("Dashboard")])])],1),t.accessToken?e("li",{staticClass:"nav-item my-1"},[e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Station",params:{balai_id:this.balai,user_id:t.user_id}}}},[e("img",{staticClass:"mr-4",attrs:{src:t.stat_i}}),e("span",[t._v("Stasiun")])])],1):t._e(),t.accessToken?e("li",{staticClass:"nav-item my-1"},["SuperAdmin"==this.user.role.role_name?e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"User",params:{balai_id:this.balai}}}},[e("img",{staticClass:"mr-4",attrs:{src:t.user_i}}),e("span",[t._v("User")])]):t._e()],1):t._e(),e("hr",{staticStyle:{color:"white"}}),t.accessToken?e("li",{staticClass:"nav-item my-1"},["SuperAdmin"==this.user.role.role_name?e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Notification"}}},[e("img",{staticClass:"mr-4",attrs:{src:t.notif_i}}),e("span",[t._v("Notifikasi")])]):t._e()],1):t._e(),t.accessToken?e("li",{staticClass:"my-1"},[e("router-link",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{to:{name:"Logout",params:{balai_id:this.balai}}}},[e("img",{staticClass:"mr-4",attrs:{src:t.login_i}}),e("span",[t._v("Sign Out")])])],1):t._e()])])])}),j=[],R=e("8265"),P=e.n(R),L=e("cbf5"),T=e.n(L),$=e("a722"),O=e.n($),U=e("f0ec"),M=e.n(U),N=e("969e"),Q=e.n(N),B=e("2058"),Y=e.n(B),I=e("2368"),E=e.n(I),F={name:"Header",data:function(){return{detBalai:[],role:null,user_id:null,logoBT:P.a,logoPDAM:P.a,dash_i:T.a,notif_i:M.a,login_i:O.a,data_i:Q.a,stat_i:Y.a,user_i:E.a,sidebarOpen:!1,isMobileView:!1,className:"bar"}},computed:Object(m["c"])(["accessToken"]),mounted:function(){this.isMobileView=window.innerWidth<=768,window.addEventListener("resize",this.handleResize)},methods:{toggleSidebar:function(){this.sidebarOpen=!this.sidebarOpen;var t=!0;t&&(document.getElementById("mySidebar").style.width="250px",null!=document.getElementById("main")&&(document.getElementById("main").style.marginLeft="250px",this.mini=!1)),"bar"===this.className?this.className="bar-white":this.className="bar"},toggleOut:function(){null!=document.getElementById("main")&&(document.getElementById("main").style.marginLeft="80px"),document.getElementById("mySidebar").style.width="80px",this.mini=!0},handleResize:function(){this.isMobileView=window.innerWidth<=768}},created:function(){this.extractUserInfo()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}},H=F,V=(e("73f2"),e("9814"),e("0408"),e("d0c4"),Object(l["a"])(H,z,j,!1,null,"63a19348",null)),G=V.exports,J=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center pb-3",staticStyle:{height:"90vh",width:"93vw"}},[e("div",{staticClass:"content-container"},[t._m(0),e("p",{staticClass:"mt-3"},[t._v(t._s(t.msg))])])]):e("div",[t.ava_width>768&&!["QA","APPROVAL"].includes(t.role)?e("div",{staticClass:"d-flex flex-row"},[e("marquee-text",{attrs:{repeat:t.text_repeat,duration:t.custom_duration,paused:t.isPaused},on:{mouseenter:function(a){t.isPaused=!t.isPaused},mouseleave:function(a){t.isPaused=!1}}},t._l(t.stations,(function(a){return e("span",{key:a.id,staticStyle:{"font-size":"1.1rem"}},[e("span",{staticStyle:{color:"#00B2FF","font-weight":"500"}},[t._v(" "+t._s(a.station_name)+" • ")]),e("span",t._l([a],(function(a,s){return e("span",{key:s,staticClass:"flex mt-2"},t._l(a.last_data,(function(s,i){return e("span",{key:i,staticStyle:{color:"#00B2FF"}},[t._v(" "+t._s(s.sensor_name)+" : "+t._s(s.value)+" "+t._s(s.notation)+" "),i<a.last_data.length-1?e("span",[t._v(" | ")]):t._e()])})),0)})),0),e("img",{staticClass:"mx-1 mb-1",staticStyle:{width:"20px"},attrs:{src:t.logoPDAM}})])})),0)],1):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col",class:{"col-6 pr-0":t.ava_width>768,"col-4":"APPROVAL"===t.role}},[e("div",{staticClass:"row"},[["QA","APPROVAL"].includes(t.role)?t._e():e("div",{staticClass:"col-12"},[e("StationMap",{staticClass:"mx-auto mt-2 shadow-sm border",staticStyle:{"border-radius":"10px"},attrs:{stations:t.stations,loading_i:t.loading_i}})],1),e("div",{staticClass:"col-12"},["APPROVAL"===t.role?e("div",{staticClass:"col-md d-flex justify-content-center",staticStyle:{"margin-top":"1rem"}},[e("div",[t.loading_data?e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin mx-2",staticStyle:{"font-size":"1.2rem"}}):t._e(),e("DatePicker",{attrs:{name:"from",type:"datetime",format:"YYYY-MM-DD","default-value":(new Date).setHours(0,0,0,0),placeholder:"Select first date","minute-step":5},on:{change:t.searchApproval},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("-")]),e("DatePicker",{attrs:{name:"to",type:"datetime",format:"YYYY-MM-DD","default-value":(new Date).setHours(23,55,0,0),placeholder:"Select last date","minute-step":5},on:{change:t.searchApproval},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]):t._e(),e("Stations",{staticClass:"shadow-sm border mt-2 bg-white",staticStyle:{"border-radius":"10px"},attrs:{stations:t.stations,stationsQA:t.stationsQA,stationsApproval:t.stationsApproval,loading_i:t.loading_i},on:{"update:stations":[function(a){t.stations=a},t.handleStationsUpdate],"station-selected":t.handleStationSelected,"stationqa-selected":t.handleStationSelectedQA,"stationapproval-selected":t.handleStationSelectedApproval}})],1)])]),e("div",{staticClass:"col px-0",class:{"col-6 px-0":t.ava_width>768,"col px-0":"APPROVAL"===t.role}},[e("StationData",{attrs:{station:t.selectedStation,stationQA:t.selectedStationQA,stationApproval:t.selectedStationApproval}})],1)])])])},Z=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"icon-container"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem"}})])}],q=e("5530"),W=(e("159b"),e("4de4"),e("d81d"),e("b680"),e("8a79"),e("ac1f"),e("5319"),e("fb6a"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.center&&t.zoom?e("div",{staticClass:"row map"},[t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}})]):t._e(),t.loading_i?t._e():e("v-map",{staticClass:"box",staticStyle:{"border-radius":"5px","z-index":"2",position:"relative"},attrs:{zoom:t.zoom,center:t.center,options:{attributionControl:!1,zoomControl:!1}},on:{"update:zoom":t.zoomUpdated,"update:center":t.centerUpdated}},[e("v-icondefault"),e("v-tilelayer",{attrs:{url:t.url,attribution:t.attribution}}),e("v-control",{staticClass:"example-custom-control m-2",staticStyle:{"border-radius":"5px",opacity:"75%"},attrs:{position:"bottomright"}},[e("div",{staticClass:"py-1 px-1",staticStyle:{"font-weight":"bold"}},[e("div",[e("img",{staticClass:"px-1 py-0",attrs:{src:t.st_im}}),t._v("Stasiun")])])]),t._l(t.stations,(function(a){return e("span",{key:a.station_serial_id},[e("span",[a.latitude?e("v-marker",{attrs:{"lat-lng":t.latLng(a.latitude,a.longitude)}},[e("v-icon",{attrs:{"icon-url":t.icon_st,"icon-size":t.dynamicSize}}),e("v-popup",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"imgSZ",attrs:{src:t.st_i}}),e("div",{staticClass:"my-1",staticStyle:{"font-weight":"600"}},[t._v(" "+t._s(a.station_name)+" "),e("br")]),e("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},["OK"==a.station_status?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"dotOK mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#219653"}},[t._v(t._s(a.station_status))])]):"maintenance"==a.station_status?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"dotMTC mx-1"}),t._v(" "),e("span",{staticStyle:{color:"black"}},[t._v("MTC")])]):"Min Threshold"==a.station_status?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"dotMin mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#00B2FF"}},[t._v(t._s(a.station_status))])]):"Max Threshold"==a.station_status?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"dotMax mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#D34053"}},[t._v(t._s(a.station_status))])]):e("div",[t._v(t._s(a.station_status))]),e("div",{staticClass:"my-1 text-muted",staticStyle:{"font-size":"0.7rem"}},[t._v(" "+t._s(t.formatDate(a.last_time))+" ")])]),e("div",{staticClass:"d-flex row"},["SuperAdmin"==t.role||"Admin"==t.role?e("div",{staticClass:"col-md-6 px-0"},[e("router-link",{staticClass:"btn btn-primary d-flex flex-row justify-content-center py-0",staticStyle:{"margin-right":"2.5px"},attrs:{type:"button",to:"/station/data/"+a.station_serial_id}},[e("img",{staticClass:"mx-1",attrs:{src:t.detail_i}}),e("span",{staticClass:"text-white",staticStyle:{"font-size":"0.8rem"}},[t._v("Data")])])],1):t._e(),"Guest"==t.role?e("div",{staticClass:"col-md-12 px-0"},[e("router-link",{staticClass:"btn btn-primary d-flex flex-row justify-content-center py-0",staticStyle:{"margin-right":"2.5px"},attrs:{type:"button",to:"/station/data/"+a.station_serial_id}},[e("img",{staticClass:"mx-1",attrs:{src:t.detail_i}}),e("span",{staticClass:"text-white",staticStyle:{"font-size":"0.8rem"}},[t._v("Data")])])],1):t._e(),"SuperAdmin"==t.role||"Admin"==t.role?e("div",{staticClass:"col-md-6 px-0"},[e("router-link",{staticClass:"btn btn-success d-flex flex-row justify-content-center py-0",staticStyle:{"margin-left":"2.5px"},attrs:{type:"button",to:"/station/update/"+a.station_serial_id}},[e("img",{staticClass:"mx-1",attrs:{src:t.edit_i}}),e("span",{staticClass:"text-white",staticStyle:{"font-size":"0.8rem"}},[t._v("Edit")])])],1):t._e()])])])],1):t._e()],1)])})),e("v-control-scale",{attrs:{position:"topright",imperial:!1,metric:!0}})],2)],1):t._e()}),K=[],X=(e("99af"),e("2699")),tt=e("a40a"),at=e("9762"),et=e("4e2b"),st=e("f60f"),it=e("d371"),nt=e("fbba"),rt=e("2253"),ot=e("cc7b"),lt=e.n(ot),ct=e("355f"),dt=e.n(ct),ut=e("8ed3"),mt=e.n(ut),pt=e("1353"),ft=e.n(pt),vt=e("a5f6"),ht=e.n(vt),gt=e("b447"),bt=e.n(gt),_t=e("fe62"),yt=e.n(_t),Ct=e("a239"),xt=e.n(Ct),wt=e("9f10"),St=e.n(wt),Dt={name:"StationMap",props:["stations","loading_i"],components:{"v-map":X["a"],"v-tilelayer":tt["a"],"v-icondefault":at["a"],"v-marker":et["a"],"v-popup":st["a"],"v-control-scale":it["a"],"v-icon":nt["a"],"v-control":rt["a"]},data:function(){return{url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"",zoom:11,center:[-7.277016214,112.708518708],iconSize:[20],icon_st:lt.a,st_im:lt.a,st_i:dt.a,edit_i:mt.a,detail_i:ft.a,mtc_i:ht.a,ok_i:bt.a,s1_i:yt.a,s2_i:xt.a,s3_i:St.a,role:""}},computed:{dynamicSize:function(){return[this.iconSize,1.15*this.iconSize]}},methods:{latLng:function(t,a){return[t,a]},centerUpdated:function(t){this.center=t},zoomUpdated:function(t){this.zoom=t},formatDate:function(t){var a=new Date(t),e={day:"2-digit",month:"short",year:"numeric"},s={hour:"2-digit",minute:"2-digit"},i=a.toLocaleDateString("en-GB",e),n=a.toLocaleTimeString("en-GB",s);return"".concat(i,", ").concat(n)}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.extractUserInfo();case 1:case"end":return a.stop()}}),a)})))()}},At=Dt,kt=(e("9fb3"),e("2f9e"),e("b8cd"),Object(l["a"])(At,W,K,!1,null,"3fe3f798",null)),zt=kt.exports,jt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.loading_i&&!["QA","APPROVAL"].includes(t.role)?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{"min-height":"35vh"}},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}})]):t._e(),t.loading_i&&["QA","APPROVAL"].includes(t.role)?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{"min-height":"90vh"}},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}})]):t._e(),"QA"===t.role?e("div",{staticClass:"box"},[t.loading_i?t._e():e("div",{staticClass:"tab-content station-list",attrs:{id:"tabs-tabContent"}},[e("div",{staticClass:"tableFixHead tab-pane fade active show",class:{h100:t.ava_width<=850,tableQA:"QA"==t.role},attrs:{id:"tabs-ARR",role:"tabpanel","aria-labelledby":"tabs-ARR-tab"}},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-border bg-white mx-2"},[e("thead",{staticClass:"table-light"},[e("tr",t._l(t.table_headQA,(function(a,s){return e("th",{key:s,class:{thClass:s>=0,sticky:2===s}},[t._v(" "+t._s(a)+" ")])})),0)]),e("tbody",t._l(t.stationsQA,(function(a,s){return e("tr",{key:a.station_serial_id,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.selectStationQA(a)}}},[e("td",[t._v(t._s(s+1))]),e("td",[t._v(" "+t._s(a.station_name)+" ")]),e("td",[e("router-link",{staticClass:"btn btn-primary btn-sm m-0 p-0",staticStyle:{"font-size":"0.8rem",padding:"0 5px!important"},attrs:{type:"button",to:{path:"/station/data/"+a.station_serial_id}}},[t._v("Data")])],1),e("td",[t._v(" "+t._s(t.formatDate(a.data[0].date))+" ")]),e("td",[t._v(t._s(a.data[0].sum))]),e("td",[t._v(t._s(a.data[0].percentage)+" %")]),e("td",[t._v(t._s(a.data[0].maintenance))])])})),0)])])])]):"APPROVAL"===t.role?e("div",{staticClass:"box"},[t.loading_i?t._e():e("div",{staticClass:"tab-content station-list",attrs:{id:"tabs-tabContent"}},[e("div",{staticClass:"tableFixHead tab-pane fade active show",class:{h100:t.ava_width<=850,tableApproval:"APPROVAL"==t.role},attrs:{id:"tabs-ARR",role:"tabpanel","aria-labelledby":"tabs-ARR-tab"}},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-border bg-white"},[e("thead",{staticClass:"table-light"},[e("tr",t._l(t.table_headApproval,(function(a,s){return e("th",{key:s,class:{thClass:s>=0,sticky:2===s}},[t._v(" "+t._s(a)+" ")])})),0)]),e("tbody",t._l(t.stationsApproval,(function(a,s){return e("tr",{key:a.station_serial_id,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.selectStationApproval(a)}}},[e("td",[t._v(t._s(s+1))]),e("td",[t._v(" "+t._s(a.station_name)+" ")]),e("td",[t._v(" "+t._s(a.sum_approval_data)+" ")]),e("td",[e("router-link",{staticClass:"btn btn-primary btn-sm m-0 p-0",staticStyle:{"font-size":"0.8rem",padding:"0 5px!important"},attrs:{type:"button",to:{path:"/station/data/"+a.station_serial_id}}},[t._v("Detail")])],1)])})),0)])])])]):e("div",{staticClass:"box"},[t.loading_i?t._e():e("div",{staticClass:"tab-content station-list",attrs:{id:"tabs-tabContent"}},[e("div",{staticClass:"tableFixHead tab-pane fade active show",class:{h100:t.ava_width<=850,tableQA:"QA"==t.role},attrs:{id:"tabs-ARR",role:"tabpanel","aria-labelledby":"tabs-ARR-tab"}},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-border bg-white mx-2"},[e("thead",{staticClass:"table-light"},[e("tr",t._l(t.table_head,(function(a,s){return e("th",{key:s,class:{thClass:s>=0,sticky:2===s}},[t._v(" "+t._s(a)+" ")])})),0)]),e("tbody",t._l(t.localStations,(function(a,s){return e("tr",{key:a.station_serial_id,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.selectStation(a)}}},[e("td",[t._v(t._s(s+1))]),e("td",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","font-size":"0.7rem"}},["OK"==a.station_status?e("div",{staticClass:"statusText"},[e("span",{staticClass:"dotOK mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#219653"}},[t._v(t._s(a.station_status))])]):"maintenance"==a.station_status?e("div",{staticClass:"statusText"},[e("span",{staticClass:"dotMTC mx-1"}),t._v(" "),e("span",{staticStyle:{color:"black"}},[t._v("MTC")])]):"Min Threshold"==a.station_status?e("div",{staticClass:"statusText"},[e("span",{staticClass:"dotMin mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#00B2FF"}},[t._v(t._s(a.station_status))])]):"Max Threshold"==a.station_status?e("div",{staticClass:"statusText"},[e("span",{staticClass:"dotMax mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#D34053"}},[t._v(t._s(a.station_status))])]):e("div",{staticClass:"statusText"},[e("span",{staticClass:"dotMax mx-1"}),t._v(" "+t._s(a.station_status)+" ")])]),e("td",[t._v(" "+t._s(a.station_name)+" ")]),e("td",["SuperAdmin"==t.role?e("router-link",{staticClass:"btn btn-sm btn-primary m-0 p-0",staticStyle:{"font-size":"0.8rem",padding:"0 5px!important"},attrs:{type:"button",to:{path:"/station/data/"+a.station_serial_id}}},[t._v("Data")]):e("router-link",{staticClass:"btn btn-primary btn-sm m-0 p-0",staticStyle:{"font-size":"0.8rem",padding:"0 5px!important"},attrs:{type:"button",to:{path:"/station/data/"+a.station_serial_id}}},[t._v("Data")])],1),e("td",[t._v(" "+t._s(t.formatDate(a.last_time))+" ")]),e("td",[t._v(" "+t._s(t.formatTime(a.last_time))+" ")]),t._l(a.last_data,(function(a,s){return e("td",{key:s},[t._v(" "+t._s(a.value)+" "+t._s(a.notation)+" ")])}))],2)})),0)])])])])])},Rt=[],Pt=e("2909"),Lt=(e("a15b"),e("b0c0"),{name:"Stations",props:["stationsQA","stationsApproval","stations","loading_i"],data:function(){return{users:[],st_stations:[],st_stationsQA:[],st_stationsApproval:[],table_head:[],table_headQA:[],table_headApproval:[],total_stat:null,total_statQA:null,total_statApproval:null,table_head_pre:[],role:null,balai:null,indexSt:null,ava_width:null,ava_height:null,localStationsData:[],intervalId:null}},computed:{localStations:function(){return this.localStationsData.length>0?this.localStationsData:this.stations}},methods:{selectStation:function(t){this.$emit("station-selected",t)},selectStationQA:function(t){this.$emit("stationqa-selected",t)},selectStationApproval:function(t){this.$emit("stationapproval-selected",t)},formatDate:function(t){var a=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],e=new Date(t),s=e.getFullYear(),i=""+e.getMonth(),n=""+e.getDate();return n.length<2&&(n="0"+n),[n,a[i],s].join(" ")},formatTime:function(t){var a=new Date(t),e=""+a.getHours(),s=""+a.getMinutes(),i=a.getSeconds();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),i.length<2&&(i="0"+i),[e,s].join(":")},loadStations:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.processStations(),"Stations"===t.$options.name&&(t.intervalId=setInterval(Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.fetchStations();case 2:t.processStations();case 3:case"end":return a.stop()}}),a)}))),3e5));case 2:case"end":return a.stop()}}),a)})))()},loadStationsQA:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.processStationsQA();case 1:case"end":return a.stop()}}),a)})))()},loadStationsApproval:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.processStationsApproval();case 1:case"end":return a.stop()}}),a)})))()},fetchStations:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/dashboard/"),{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:e=a.sent,t.localStationsData=e.data.data,t.localStationsData=e.data.data.map((function(t){return Object(q["a"])(Object(q["a"])({},t),{},{last_data:t.last_data.map((function(t){return Object(q["a"])(Object(q["a"])({},t),{},{value:function(t){return t=parseFloat(t).toFixed(2),t.endsWith(".00")&&(t=t.replace(".00","")),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),t}(t.value)})}))})})),t.$emit("update:stations",t.localStationsData),t.loading_i=200!==e.status,a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.error(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},processStations:function(){this.st_stations=Object(Pt["a"])(this.localStations),this.total_stat=this.localStations.length,this.table_head=["No","Status","Nama Stasiun","Data","Tanggal","Waktu","Debit","Totalizer"]},processStationsQA:function(){this.st_stationsQA=Object(Pt["a"])(this.stationsQA),this.total_statQA=this.stationsQA.length,this.table_headQA=["No","Nama Stasiun","Data","Tanggal","Jumlah Data","Persentase Data","Jumlah Gangguan"]},processStationsApproval:function(){this.st_stationsApproval=Object(Pt["a"])(this.stationsApproval),this.total_statApproval=this.stationsApproval.length,this.table_headApproval=["No","Nama Stasiun","Jumlah Data Taksasi","Detail"]},handleScroll:function(){var t=document.querySelector("th.sticky"),a=document.querySelector("table"),e=a.getBoundingClientRect(),s=t.getBoundingClientRect();s.top<=e.top&&s.bottom>=e.bottom?t.style.top="0":s.top<=e.top?t.style.top="".concat(e.top-s.top,"px"):s.bottom>=e.bottom&&(t.style.top="".concat(e.bottom-s.bottom,"px"))}},created:function(){this.extractUserInfo(),this.ava_width=screen.availWidth,this.ava_height=screen.availHeight},mounted:function(){"QA"===this.role?this.loadStationsQA():"APPROVAL"===this.role?this.loadStationsApproval():this.loadStations()},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId)}}),Tt=Lt,$t=(e("8a01"),Object(l["a"])(Tt,jt,Rt,!1,null,"ab661e08",null)),Ot=$t.exports,Ut=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container px-0"},[["QA","APPROVAL"].includes(t.role)||t.station?t._e():e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{"min-height":"70vh"}},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}})]),"QA"!==t.role||t.stationQA?t._e():e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{"min-height":"90vh"}},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}}),e("div",{staticClass:"py-2"},[t._v("Drawing Chart...")])]),"APPROVAL"!==t.role||t.stationApproval?t._e():e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{"min-height":"90vh"}},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}}),e("div",{staticClass:"py-2"},[t._v("Drawing Chart...")])]),t.station&&!["QA","APPROVAL"].includes(t.role)?e("div",[e("div",{staticStyle:{"max-width":"100% !important","min-width":"100% !important"}},[e("div",{staticClass:"card box-sm mt-2 mx-1 comShadow",staticStyle:{"box-shadow":"10px","border-radius":"5x"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 p-0 imgSZ"},[e("img",{staticClass:"img-fluid",staticStyle:{"object-fit":"cover","border-radius":"5px 0px 0px 5px","margin-left":"12px",width:"92%"},attrs:{src:""+t.station.image,alt:"station-img"}})]),e("div",{staticClass:"col-md-8 my-0",class:{"mt-2":t.ava_width<768}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7 col-7"},[e("div",{staticStyle:{"font-weight":"500","font-size":"1rem","margin-left":"7px"}},[t._v(" "+t._s(t.station.station_name)+" ")])]),e("div",{staticClass:"col-md-5 col-5 d-flex justify-content-end"},["OK"==t.station.station_status?e("div",{staticClass:"statusText px-2",staticStyle:{"font-size":"0.8rem"}},[e("span",{staticClass:"dotOK mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#219653"}},[t._v(t._s(t.station.station_status))])]):"maintenance"==t.station.station_status?e("div",{staticClass:"statusText px-2",staticStyle:{"font-size":"0.8rem"}},[e("span",{staticClass:"dotMTC mx-1"}),t._v(" "),e("span",{staticStyle:{color:"black"}},[t._v("MTC")])]):"Min Threshold"==t.station.station_status?e("div",{staticClass:"statusText px-2",staticStyle:{"font-size":"0.8rem"}},[e("span",{staticClass:"dotMin mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#00B2FF"}},[t._v(t._s(t.station.station_status))])]):"Max Threshold"==t.station.station_status?e("div",{staticClass:"statusText px-2",staticStyle:{"font-size":"0.8rem"}},[e("span",{staticClass:"dotMax mx-1"}),t._v(" "),e("span",{staticStyle:{color:"#D34053"}},[t._v(t._s(t.station.station_status))])]):e("div",{staticClass:"statusText px-2",staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t.station.station_status))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Lokasi")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.station.location))])]),"Distribusi"==t.station.balai?e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("In/Out Interzone")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.station.interzone))])]):e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Nameplate Head")]),e("div",{staticClass:"info-value"},[t._v(" "+t._s(t.station.nameplate_head))])])]),"Distribusi"==t.station.balai?e("div",{staticClass:"col-md-5 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v(" Max Flow")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.station.max_flow)+" L/s")])]),e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Diameter Pipa")]),e("div",{staticClass:"info-value"},[t._v(" "+t._s(t.station.diameter)+" mm ")])])]):e("div",{staticClass:"col-md-5 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Jumlah Operasi")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.station.jumlah_operasi))])]),e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Kapasitas")]),e("div",{staticClass:"info-value"},[t._v(" "+t._s(t.station.kapasitas)+" L/s ")])])])])])])])]),e("div",[e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[t._m(0),e("LineChart",{tag:"Chart",staticClass:"hChart25 p-0 pr-0 pt-0 pb-0",attrs:{label:t.formatAllDates(t.station.chart.time),"chart-data":t.station.chart.sensor_data[0].value,title:"Debit ("+t.station.chart.sensor_data[0].notation+")"}})],1)]),e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[t._m(1),e("TotalChart",{tag:"Chart",staticClass:"hChart25 p-0 pr-0 pt-0 pb-0",attrs:{label:t.formatAllDates(t.station.chart.time),"chart-data":t.station.chart.sensor_data[1].value,title:"Totalizer ("+t.station.chart.sensor_data[1].notation+")"}})],1)]),"QA"===t.role?e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[t._m(2),e("TotalChartBar",{tag:"Chart",staticClass:"hChart25 p-0 pr-0 pt-0 pb-0",attrs:{label:t.formatAllDates(t.station.chart.time),"chart-data":t.station.chart.sensor_data[1].value,title:t.station.chart.sensor_data[1].sensor_name+" ("+t.station.chart.sensor_data[1].notation+")"}})],1)]):t._e()])]):t._e(),t.stationQA&&"QA"===t.role?e("div",[e("div",{staticClass:"mt-2"},[e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[e("div",[e("div",{staticClass:"mt-1 d-flex justify-content-center",staticStyle:{"font-weight":"500","font-size":"1rem","margin-left":"7px"}},[t._v(" "+t._s(t.stationQA.station_name)+" ")]),e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Jumlah Data ")])]),e("TotalChartBar",{tag:"Chart",staticClass:"hChartQA p-0 pr-0 pt-0 pb-0",attrs:{label:t.stationQA.data.map((function(t){return t.date})).reverse(),"chart-data":t.stationQA.data.map((function(t){return t.sum})).reverse(),title:"Jumlah Data"}})],1)]),e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[t._m(3),e("TotalChartBar",{tag:"Chart",staticClass:"hChartQA p-0 pr-0 pt-0 pb-0",attrs:{label:t.stationQA.data.map((function(t){return t.date})).reverse(),"chart-data":t.stationQA.data.map((function(t){return t.percentage})).reverse(),title:"Persentase Data (%)"}})],1)]),e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow",staticStyle:{"border-radius":"5px"}},[t._m(4),e("TotalChartBar",{tag:"Chart",staticClass:"hChartQA p-0 pr-0 pt-0 pb-0",attrs:{label:t.stationQA.data.map((function(t){return t.date})).reverse(),"chart-data":t.stationQA.data.map((function(t){return t.maintenance})).reverse(),title:"Jumlah Gangguan"}})],1)])])]):t._e(),t.stationApproval&&"APPROVAL"===t.role?e("div",[e("div",{staticClass:"mt-2"},[e("div",{staticStyle:{"border-radius":"5px"}},[e("div",{staticClass:"box-sm border mx-1 bg-white comShadow p-1",staticStyle:{"border-radius":"5px"}},[e("div",[e("div",{staticClass:"mt-1 d-flex justify-content-center py-2",staticStyle:{"font-weight":"500","font-size":"1.3rem","margin-left":"7px"}},[t._v(" "+t._s(t.stationApproval.station_name)+" ")])]),t.stationApproval.data.length>0?e("div",{staticClass:"pt-2 pb-1 d-flex justify-content-between mx-2"},[e("div",[t._v("Total Data Taksasi "+t._s(t.stationApproval.sum_approval_data)+" ")]),e("button",{staticClass:"btn btn-success btn-sm py-1",on:{click:function(a){return t.approveAllRanges(t.stationApproval.station_serial_id)}}},[t._v("Approve All ")])]):t._e(),t.stationApproval.data.length>0?e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-border bg-white"},[e("thead",{staticClass:"table-light"},[e("tr",t._l(t.table_headApproval,(function(a,s){return e("th",{key:s,class:{thClass:s>=0,sticky:2===s},staticStyle:{"font-weight":"normal"}},[t._v(" "+t._s(a)+" ")])})),0)]),e("tbody",t._l(t.stationApproval.data,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(s+1))]),e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.sum))]),e("td",[e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.approveRange(a.date,a.date,t.stationApproval.station_serial_id)}}},[t._v("Approve")])])])})),0)]):e("div",{staticClass:"px-1 py-1"},[t._v(" No Data to Approve ")])])])])]):t._e()])},Mt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Data Debit ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Data Totalizer ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Data Gangguan ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Persentase Data (%) ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"px-2 py-1",staticStyle:{"font-weight":"500","font-size":"0.9em"}},[t._v(" Jumlah Gangguan ")])])}],Nt=(e("d9e2"),e("1fca")),Qt={name:"LineChart",extends:Nt["b"],props:{label:{type:Array},chartData:{type:Array},chartData2:{type:Array},legend:{type:Boolean},title:{type:String}},data:function(){return{gradient:null}},mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(0,"rgba(104, 192, 255, 1)"),this.gradient.addColorStop(.5,"rgba(104, 192, 255, 0)"),this.gradient.addColorStop(.6,"rgba(59, 130, 246, 0.08)"),this.gradient.addColorStop(1,"rgba(59, 130, 246, 0.08)"),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(99, 102, 241, 0.9)",pointBackgroundColor:"rgba(99, 102, 241, 0.9)",borderWidth:2,backgroundColor:this.gradient,data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})},watch:{chartData:function(){this.$data._chart.destroy(),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(99, 102, 241, 0.9)",pointBackgroundColor:"rgba(99, 102, 241, 0.9)",borderWidth:2,backgroundColor:this.gradient,data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})}}},Bt=Qt,Yt=Object(l["a"])(Bt,h,g,!1,null,null,null),It=Yt.exports,Et={name:"LineChart",extends:Nt["b"],props:{label:{type:Array},chartData:{type:Array},chartData2:{type:Array},legend:{type:Boolean},title:{type:String}},data:function(){return{gradient:null}},mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(0,"rgba(253, 188, 92, 0.9)"),this.gradient.addColorStop(.5,"rgba(253, 188, 92, 0)"),this.gradient.addColorStop(.6,"rgba(255, 165, 0, 0.08)"),this.gradient.addColorStop(1,"rgba(255, 165, 0, 0.08)"),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(253, 188, 92, 0.9)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,backgroundColor:this.gradient,data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!1},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})},watch:{chartData:function(){this.$data._chart.destroy(),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(253, 188, 92, 0.9)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,backgroundColor:this.gradient,data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!1},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})}}},Ft=Et,Ht=Object(l["a"])(Ft,b,_,!1,null,null,null),Vt=Ht.exports,Gt={name:"BarChart",extends:Nt["a"],props:{label:{type:Array},chartData:{type:Array},chartData2:{type:Array},legend:{type:Boolean},title:{type:String}},data:function(){return{gradient:null}},mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(1,"rgba(59,130,246, 0.08)"),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(253, 188, 92, 0.9)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,backgroundColor:"rgba(253, 188, 92, 0.7)",data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})},watch:{chartData:function(){this.$data._chart.destroy(),this.renderChart({labels:this.label,datasets:[{label:this.title,borderColor:"rgba(253, 188, 92, 0.9)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,backgroundColor:"rgba(253, 188, 92, 0.7)",data:this.chartData,pointRadius:1,tension:.1,z:2}]},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{borderDash:[8,4],color:!1,z:1}}]}})}}},Jt=Gt,Zt=Object(l["a"])(Jt,y,C,!1,null,null,null),qt=Zt.exports,Wt=e("c1df"),Kt=e.n(Wt),Xt={name:"StationData",props:["station","stationQA","stationApproval"],data:function(){return{loading_i:!0,window_loc:"",options:{arcColors:["rgb(44,151,222)","lightgray"],arcDelimiters:[80],rangeLabel:["0%","100%"],centralLabel:"70%"},currentIndex:0,ava_width:null,table_headApproval:[]}},components:{LineChart:It,TotalChart:Vt,TotalChartBar:qt},watch:{station:{handler:function(t){this.updateComponentData(t)},deep:!0},stationQA:{handler:function(t){this.updateComponentData(t)},deep:!0},stationApproval:{handler:function(t){this.updateComponentData(t)},deep:!0}},methods:{approveAllRanges:function(t){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==a.stationApproval.data.length){e.next=3;break}return console.error("No data available to approve."),e.abrupt("return");case 3:return s=a.stationApproval.data.reduce((function(t,a){var e=Kt()(a.date);return e.isBefore(t)?e:t}),Kt()(a.stationApproval.data[0].date)),i=a.stationApproval.data.reduce((function(t,a){var e=Kt()(a.date);return e.isAfter(t)?e:t}),Kt()(a.stationApproval.data[0].date)),e.next=7,a.approveRange(s.format("YYYY-MM-DD 00:00"),i.format("YYYY-MM-DD 23:55"),t);case 7:case"end":return e.stop()}}),e)})))()},approveRange:function(t,a,e){var s=this;return Object(k["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t?Kt()(t).format("YYYY-MM-DD 00:00"):null,r=a?Kt()(a).format("YYYY-MM-DD 23:55"):null,i.prev=2,i.next=5,f.a.get("".concat(s.$baseURL,"/pdam/approve_taksasi/").concat(e,"/"),{headers:{Authorization:"Bearer ".concat(s.token)},params:{from:n,until:r}});case 5:o=i.sent,console.log(o),i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](2),console.log(i.t0);case 12:s.$swal({position:"top-end",width:"300px",icon:"success",title:"Approve berhasil",showConfirmButton:!1,timer:1e3}),setTimeout((function(){location.reload()}),1200);case 14:case"end":return i.stop()}}),i,null,[[2,9]])})))()},updateComponentData:function(t){this.loading_i=!1,this.window_loc=t.location||""},formatDate:function(t){try{var a=new Date(t);if(isNaN(a))throw new Error("Invalid date");var e={day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"};return new Intl.DateTimeFormat("en-GB",e).format(a)}catch(s){return console.error("Error parsing date:",s),t}},formatAllDates:function(t){return t.map(this.formatDate)}},created:function(){this.extractUserInfo(),this.ava_width=screen.availWidth,this.table_headApproval=["No","Tanggal","Jumlah Data Taksasi","Approve Taksasi"]}},ta=Xt,aa=(e("1f0e"),e("1ba3"),Object(l["a"])(ta,Ut,Mt,!1,null,"39b5ad3b",null)),ea=aa.exports,sa=(e("a9e3"),e("38cf"),e("cb29"),{name:"MarqueeText",functional:!0,props:{duration:{type:Number,default:15},repeat:{type:Number,default:2,validator:function(t){return t>0}},paused:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1}},render:function(t,a){var e=a.$style,s=a.props,i=s.duration,n=s.repeat,r=s.paused,o=s.reverse,l=a.children,c=a.data,d=c.staticClass,u=c.key,m=c.on,p=t("div",{class:e.text,style:{animationDuration:"".concat(i,"s"),animationDirection:o?"reverse":void 0}},l);return t("div",{key:u,on:m,class:[d,e.wrap]},[t("div",{class:[r?e.paused:void 0,e.content]},Array(n).fill(p))])}}),ia=sa,na=e("6edf");function ra(t){this["$style"]=na["default"].locals||na["default"]}var oa,la,ca,da,ua,ma,pa=Object(l["a"])(ia,x,w,!1,ra,null,null),fa=pa.exports,va={name:"Map",components:{StationMap:zt,Stations:Ot,StationData:ea,MarqueeText:fa},data:function(){return{startDate:null,endDate:null,loading_data:!1,isPaused:!1,text_duration:null,text_repeat:null,custom_duration:null,showCarousel:!0,logoPDAM:P.a,msg:"Fetching data, please wait...",role:null,balai:null,stations:[],stationsQA:[],stationsApproval:[],marker:null,loading_i:!0,status:[],selectedStation:null,selectedStationQA:null,selectedStationApproval:null,userStation:null,ava_width:null}},watch:{stations:{immediate:!0,handler:function(t){t.length>0&&!this.selectedStation&&(this.selectedStation=t[0])}},stationsApproval:{immediate:!0,handler:function(t){t.length>0&&!this.selectedStationApproval&&(this.selectedStationApproval=t[0])}},stationsQA:{immediate:!0,handler:function(t){t.length>0&&!this.selectedStationQA&&(this.selectedStationQA=t[0])}}},methods:{handleStationsUpdate:function(t){this.stations=t},handleStationSelected:function(t){this.selectedStation=t},handleStationSelectedQA:function(t){this.selectedStationQA=t},handleStationSelectedApproval:function(t){this.selectedStationApproval=t},loadData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=[],s=[],i=null,n=null,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/dashboard/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){a.data.data.forEach((function(t){e.push(t.station_name.length),s.push(t.last_data.filter((function(t){return"Flow Meter"===t.sensor_name||"Totalizer"===t.sensor_name})).reduce((function(t,a){return t+a.sensor_name}),"").length);var a=t.station_name.length+1;t.last_data.filter((function(t){return"Flow Meter"===t.sensor_name||"Totalizer"===t.sensor_name})).reduce((function(t,a){return t+a.sensor_name}),"").length,t.duration=510*a})),i=e.reduce((function(t,a){return t+a}),0),n=s.reduce((function(t,a){return t+a}),0),t.stations=a.data.data.map((function(t){return Object(q["a"])(Object(q["a"])({},t),{},{last_data:t.last_data.map((function(t){return Object(q["a"])(Object(q["a"])({},t),{},{value:function(t){return t=parseFloat(t).toFixed(2),t.endsWith(".00")&&(t=t.replace(".00","")),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),t}(t.value)})}))})})),t.custom_duration=(i+n)/2,t.stations.slice(-1).pop().duration,200==a.status&&(t.loading_i=!1)})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 6:r=0,o=function a(){setTimeout((function(){r=(r+1)%t.stations.length,t.$refs.carousel&&t.$refs.carousel.goToPage(r),a()}),t.stations[r].duration)},o();case 9:case"end":return a.stop()}}),a)})))()},loadDataQA:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/pdam/QA/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.stationsQA=a.data,200==a.status&&(t.loading_i=!1)}));case 2:case"end":return a.stop()}}),a)})))()},loadDataApproval:function(){var t=arguments,a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:null,i=t.length>1&&void 0!==t[1]?t[1]:null,e.next=4,f.a.get("".concat(a.$baseURL,"/pdam/approval/"),{headers:{Authorization:"Bearer ".concat(a.token)},params:{from:s,until:i}}).then((function(t){a.stationsApproval=t.data,200==t.status&&(a.loading_i=!1)}));case 4:case"end":return e.stop()}}),e)})))()},searchApproval:function(){var t=this.startDate?Kt()(this.startDate).format("YYYY-MM-DD HH:mm"):null,a=this.endDate?Kt()(this.endDate).format("YYYY-MM-DD HH:mm"):null,e=Kt()(this.endDate).diff(Kt()(this.startDate),"days");e>1e4?"APPROVAL"===this.role&&this.loadDataApproval(null,null):"APPROVAL"===this.role&&this.loadDataApproval(t,a)}},created:function(){this.extractUserInfo(),this.ava_width=screen.availWidth},mounted:function(){"QA"===this.role?this.loadDataQA():"APPROVAL"===this.role?this.loadDataApproval():this.loadData()}},ha=va,ga=Object(l["a"])(ha,J,Z,!1,null,null,null),ba=ga.exports,_a={components:{Header:G,Map:ba},data:function(){return{isPaused:!1,text_duration:null,text_repeat:null,logoPDAM:P.a,ava_width:null,ava_height:null,balai:null,loading_i:!0,balai_name:"",custom_duration:null,showCarousel:!0}},methods:{checkScreen:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.ava_width=screen.availWidth,t.ava_height=screen.availHeight;case 2:case"end":return a.stop()}}),a)})))()}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.extractUserInfo(),t.balai_name=document.title,t.loading_i=!1;case 3:case"end":return a.stop()}}),a)})))()},mounted:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.checkScreen();case 1:case"end":return a.stop()}}),a)})))()}},ya=_a,Ca=(e("c9bd"),e("2154"),Object(l["a"])(ya,D,A,!1,null,"27172da5",null)),xa=Ca.exports,wa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("div",{staticClass:"container"},[e("div",{staticClass:"row d-flex align-items-center justify-content-center"},[e("div",{staticClass:"img-fluid login100-more",style:{backgroundImage:"url(' "+t.bg_pdam+" ')"}},[e("div",{staticClass:"logo-container m-3"},[e("router-link",{attrs:{to:{name:"Home",params:{balai_id:t.balai}}}},[e("img",{staticClass:"logo-img",attrs:{src:t.logoPDAM,alt:""}})]),t._m(0)],1)]),e("div",{staticClass:"col-md-6"},[e("form",{staticClass:"login100-form validate-form",on:{submit:function(a){return a.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"form-group py-2"},[e("span",{staticClass:"form-title"},[t._v(" Sign In ")]),e("label",{staticClass:"mb-2",attrs:{for:"username"}},[t._v("Username")]),e("div",{staticClass:"input-group mb-3"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control py-2",staticStyle:{padding:"0.375rem 0.75rem"},attrs:{type:"text",placeholder:"Username",id:"username",autocomplete:"username",required:""},domProps:{value:t.username},on:{input:function(a){a.target.composing||(t.username=a.target.value)}}})])]),e("div",{staticClass:"form-group py-2",staticStyle:{"border-radius":"1rem"}},[e("label",{staticClass:"mb-2",attrs:{for:"password"}},[t._v("Password")]),e("div",{staticClass:"input-group mb-3"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control py-2",staticStyle:{padding:"0.375rem 0.75rem"},attrs:{type:"password",placeholder:"Password",id:"password",autocomplete:"current-password",required:""},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})])]),t.incorrectAuth?e("p",{staticClass:"pb-3",staticStyle:{color:"#fbb040"}},[t._v(" "+t._s(t.msg)+" ")]):t._e(),t.spin_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center pb-3"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"1.5rem"}})]):t._e(),t._m(3),e("div",{staticClass:"text-center p-t-90 pb-3",staticStyle:{color:"gray"}},[t._v(" © "+t._s(t.year)+" "+t._s(t.$app_title)+" ")])])])])])])},Sa=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("p",{staticClass:"bws"},[t._v("PERUSAHAAN DAERAH AIR MINUM")]),e("p",{staticClass:"bws"},[t._v("DATA MONITORING")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"input-group-icon"},[s("img",{attrs:{src:e("6aed"),alt:"usr icon"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"input-group-icon"},[s("img",{attrs:{src:e("9619"),alt:"Check icon"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-login100-form-btn"},[e("button",{staticClass:"login100-form-btn rounded",staticStyle:{"min-width":"100%"},attrs:{type:"submit"}},[t._v(" Sign In ")])])}],Da=e("ab55"),Aa=e.n(Da),ka={name:"Login",components:{},data:function(){return{username:"",password:"",msg:"",bg_pdam:Aa.a,logoPDAM:P.a,incorrectAuth:!1,year:null,balai:null,spin_i:!1,balai_name:"",stats:!1}},methods:{login:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.spin_i=!0,t.$store.dispatch("userLogin",{username:t.username,password:t.password}).then((function(a){t.$router.push({name:"Home"}),200==a.status&&(t.spin_i=!1)})).catch((function(a){t.incorrectAuth=!0,t.msg="Error: Request failed with status code 400"==a?"These credentials do not match our records.":"Please try to login again.",t.spin_i=!1}));case 2:case"end":return a.stop()}}),a)})))()}},created:function(){var t=new Date;this.year=t.getFullYear(),console.log("x12.2.25")}},za=ka,ja=(e("aeea"),e("24af"),e("4f35"),Object(l["a"])(za,wa,Sa,!1,null,"112a5e64",null)),Ra=ja.exports,Pa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex flex-column min-vh-100 justify-content-center align-items-center"},[e("router-link",{attrs:{to:{name:"Home"}}},[e("img",{attrs:{src:t.bg_img}})])],1)},La=[],Ta=e("8e71"),$a=e.n(Ta),Oa={name:"E_404",components:{},data:function(){return{bg_img:$a.a}}},Ua=Oa,Ma=(e("1f8e"),Object(l["a"])(Ua,Pa,La,!1,null,"40e8ff68",null)),Na=Ma.exports,Qa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"log"})},Ba=[],Ya={created:function(){this.$store.dispatch("userLogout",{router:this.$router})}},Ia=Ya,Ea=Object(l["a"])(Ia,Qa,Ba,!1,null,null,null),Fa=Ea.exports,Ha=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header"),e("div",{staticClass:"mobile-width d-flex justify-content-between align-items-center"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")])]),e("div",{staticClass:"mobile-width"},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"subTitle"},[t._v("Daftar Stasiun")]),e("div",["SuperAdmin"===t.role?e("router-link",{staticClass:"btn btn-primary float-right my-1",staticStyle:{padding:"5px 10px"},attrs:{to:{name:"AddStation"},type:"button"}},[t._v("Tambah Data")]):t._e()],1)]),e("dataset",{attrs:{"ds-data":t.stations,"ds-sortby":t.sortBy,"ds-search-in":["station_name","location"]},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return[e("div",{attrs:{"data-page-count":s.dsPagecount}},[e("dataset-search",{attrs:{"ds-search-placeholder":"Search..."}})],1),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._l(t.cols,(function(a,s){return e("th",{key:a.field,staticClass:"thLight",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"1.5rem"}})]):t._e(),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.rowIndex;return[e("tr",[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(s.station_name))]),e("td",[t._v(t._s(s.location))]),"SuperAdmin"==t.role?e("td",[t._v(t._s(s.balai.balai_name))]):t._e(),e("td",[t._v(t._s(s.latitude))]),e("td",[t._v(t._s(s.longitude))]),e("td",[e("router-link",{staticClass:"btn btn-primary btn-sm mx-1",attrs:{type:"button",to:{path:"/station/data/"+s.station_serial_id}}},[t._v("Data")]),"SuperAdmin"==t.role?e("span",[e("router-link",{staticClass:"btn btn-success btn-sm mx-1",attrs:{type:"button",to:"/station/update/"+s.station_serial_id+"/"}},[t._v("Edit")])],1):t._e(),!0===t.is_staff?e("span",[e("button",{staticClass:"btn btn-danger btn-sm mx-1",attrs:{type:"button"},on:{click:function(a){return t.deleteData(s.station_serial_id)}}},[t._v(" Delete ")])]):t._e()],1)])]}}],null,!0)})],1)])])]),e("div",{staticClass:"d-flex flex-md-row flex-column justify-content-between align-items-center"},[e("dataset-info",{staticClass:"mb-2 mb-md-0"}),e("dataset-pager")],1)]}}])})],1)],1)},Va=[],Ga=(e("4e82"),e("b97b")),Ja=e("ea8e"),Za=e("ea0d"),qa=e("eb7e"),Wa=e("7b19"),Ka={name:"Station",components:{Header:G,Dataset:Ga["a"],DatasetItem:Ja["a"],DatasetInfo:Za["a"],DatasetPager:qa["a"],DatasetSearch:Wa["a"]},data:function(){return{stations:[],loading_i:!0,balais:[],role:null,station:0,balai:null,nama_pos:"",cols:[{name:"Nama Stasiun"},{name:"Lokasi"},{name:"Latitude"},{name:"Longitude"},{name:"Action"}],colSuper:[{name:"Nama Stasiun"},{name:"Lokasi"},{name:"Produksi"},{name:"Latitude"},{name:"Longitude"},{name:"Action"}],userStationList:[]}},computed:{sortBy:function(){return this.cols.reduce((function(t,a){return a.sort&&("asc"===a.sort?t.push(a.field):t.push("-"+a.field)),t}),[])}},methods:Object(q["a"])(Object(q["a"])({delete:function(t){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("".concat(a.$baseURL,"/pdam/station/").concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}});case 3:if(s=e.sent,204!=s.status){e.next=7;break}return e.next=7,a.loadData(a.currentPage);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error deleting data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteData:function(t){var a=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&a.delete(t)}))}},Object(m["b"])(["updateUserStationList"])),{},{click:function(t,a){var e,s=this.cols[a];t.shiftKey||this.cols.forEach((function(t){t.field!==s.field&&(t.sort="")})),s.sort||(e="asc"),"desc"===s.sort&&(e=t.shiftKey?"":"asc"),"asc"===s.sort&&(e="desc"),s.sort=e},loadData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"SuperAdmin"==t.role&&(t.cols=t.colSuper),a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/station/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.stations=a.data.data,200==a.status&&(t.loading_i=!1)})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 3:case"end":return a.stop()}}),a)})))()}}),created:function(){this.extractUserInfo(),this.loadData()}},Xa=Ka,te=(e("d294"),e("3c7e"),Object(l["a"])(Xa,Ha,Va,!1,null,"40091582",null)),ae=te.exports,ee=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header"),e("form",{on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"mobile-width"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" "+t._s(t.role)+" ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"subTitle"},[t._v("Tambah Stasiun")]),e("div",[e("router-link",{staticClass:"btn btn-light border mx-4 bg-white",attrs:{to:{name:"Station"},type:"button"}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Simpan")])],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data Stasiun")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md pb-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputNaPo"}},[t._v("Nama Stasiun*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.station_name,expression:"item.station_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputNaPo",placeholder:"Nama Stasiun",required:""},domProps:{value:t.item.station_name},on:{input:function(a){a.target.composing||t.$set(t.item,"station_name",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Lokasi")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.location,expression:"item.location"}],staticClass:"form-control",attrs:{type:"text",id:"inputLo",placeholder:"Lokasi"},domProps:{value:t.item.location},on:{input:function(a){a.target.composing||t.$set(t.item,"location",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLa"}},[t._v("Latitude*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.latitude,expression:"item.latitude"}],staticClass:"form-control",attrs:{type:"number",id:"inputLa",step:"0.000000001",placeholder:"Latitude",required:""},domProps:{value:t.item.latitude},on:{input:function(a){a.target.composing||t.$set(t.item,"latitude",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Longitude*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.longitude,expression:"item.longitude"}],staticClass:"form-control",attrs:{type:"number",id:"inputLo",step:"0.000000001",placeholder:"Longitude",required:""},domProps:{value:t.item.longitude},on:{input:function(a){a.target.composing||t.$set(t.item,"longitude",a.target.value)}}})])])])]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Foto Stasiun")]),e("div",{staticClass:"card-body"},[t.item.image?e("div",{staticClass:"dropZone-uploaded"},[e("div",{staticClass:"dropZone-uploaded-info"},[e("img",{staticStyle:{"max-width":"120px","max-height":"60px"},attrs:{src:t.item.image}}),e("span",{staticClass:"dropZone-filename p-1"},[t._v(t._s(t.file.name))]),e("button",{staticClass:"btn btn-primary removeFile p-1",attrs:{type:"button"},on:{click:t.removeFile}},[t._v(" Remove File ")])])]):e("div",[e("div",{class:["dropZone",t.dragging?"dropZone-over":""],on:{dragenter:function(a){t.dragging=!0},dragleave:function(a){t.dragging=!1}}},[e("div",{staticClass:"dropZone-info",on:{drag:t.onChange}},[e("img",{staticStyle:{"max-width":"120px","max-height":"60px"},attrs:{src:t.item.image}}),t._m(0),t._m(1)]),e("input",{attrs:{type:"file"},on:{change:t.updateImage}})])])])]),e("div",{staticClass:"card pt-1"},[e("div",{staticClass:"card-header"},[t._v("Data Logger")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Serial Number Logger")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sn_logger,expression:"item.sn_logger"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Serial Number Logger"},domProps:{value:t.item.sn_logger},on:{input:function(a){a.target.composing||t.$set(t.item,"sn_logger",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Serial Number Modem")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sn_modem,expression:"item.sn_modem"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Serial Number Modem"},domProps:{value:t.item.sn_modem},on:{input:function(a){a.target.composing||t.$set(t.item,"sn_modem",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Topic MQTT*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.topic,expression:"item.topic"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Topic MQTT",required:""},domProps:{value:t.item.topic},on:{input:function(a){a.target.composing||t.$set(t.item,"topic",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Maintenance Status")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.maintenance_status,expression:"item.maintenance_status"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item,"maintenance_status",a.target.multiple?e:e[0])}}},t._l(t.maintStatus,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),0)])])])])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data Produksi")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md py-1"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Produksi*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.balai,expression:"item.balai"}],staticClass:"form-select",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item,"balai",a.target.multiple?e:e[0])}}},t._l(t.produksis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.balai_name)+" ")])})),0)]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"UkuranSensor"}},[t._v("Ukuran Sensor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sensor_size,expression:"item.sensor_size"}],staticClass:"form-control",attrs:{type:"text",id:"UkuranSensor",placeholder:"Ukuran Sensor"},domProps:{value:t.item.sensor_size},on:{input:function(a){a.target.composing||t.$set(t.item,"sensor_size",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"HargaSatuan"}},[t._v("Harga Satuan")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.unit_price,expression:"item.unit_price"}],staticClass:"form-control",attrs:{type:"number",id:"HargaSatuan",placeholder:"Harga Satuan"},domProps:{value:t.item.unit_price},on:{input:function(a){a.target.composing||t.$set(t.item,"unit_price",a.target.value)}}})])]),4==t.item.balai?e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"In/Out Interzone"}},[t._v("In/Out Interzone")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.interzone,expression:"item.interzone"}],staticClass:"form-control",attrs:{type:"text",id:"In/Out Interzone",placeholder:"Interzone"},domProps:{value:t.item.interzone},on:{input:function(a){a.target.composing||t.$set(t.item,"interzone",a.target.value)}}})])]):e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Nameplate"}},[t._v("Nameplate Head")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.nameplate_head,expression:"item.nameplate_head"}],staticClass:"form-control",attrs:{type:"text",id:"Nameplate",placeholder:"Nameplate Head"},domProps:{value:t.item.nameplate_head},on:{input:function(a){a.target.composing||t.$set(t.item,"nameplate_head",a.target.value)}}})])]),4==t.item.balai?e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Max"}},[t._v("Max Flow")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.max_flow,expression:"item.max_flow"}],staticClass:"form-control",attrs:{type:"text",id:"Max",placeholder:"Max Flow"},domProps:{value:t.item.max_flow},on:{input:function(a){a.target.composing||t.$set(t.item,"max_flow",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Diameter"}},[t._v("Diameter Pipa")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.pipe_diameter,expression:"item.pipe_diameter"}],staticClass:"form-control",attrs:{type:"text",id:"Diameter",placeholder:"Diameter Pipa"},domProps:{value:t.item.pipe_diameter},on:{input:function(a){a.target.composing||t.$set(t.item,"pipe_diameter",a.target.value)}}})])]):e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Kapasitas"}},[t._v("Kapasitas")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.capacity,expression:"item.capacity"}],staticClass:"form-control",attrs:{type:"text",id:"Kapasitas",placeholder:"Kapasitas"},domProps:{value:t.item.capacity},on:{input:function(a){a.target.composing||t.$set(t.item,"capacity",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Jumlah"}},[t._v("Jumlah Operasi")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sum_operation,expression:"item.sum_operation"}],staticClass:"form-control",attrs:{type:"text",id:"Jumlah",placeholder:"Jumlah Operasi"},domProps:{value:t.item.sum_operation},on:{input:function(a){a.target.composing||t.$set(t.item,"sum_operation",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Percent"}},[t._v("Percent Cal")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.percent_cal,expression:"item.percent_cal"}],staticClass:"form-control",attrs:{type:"number",id:"Percent",step:"0.01",placeholder:"Percent Cal"},domProps:{value:t.item.percent_cal},on:{input:function(a){a.target.composing||t.$set(t.item,"percent_cal",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Factor Cal")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.factor_cal,expression:"item.factor_cal"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item,"factor_cal",a.target.multiple?e:e[0])}}},t._l(t.factor_cal_value,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),0)])])])])])])])])],1)},se=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropZone-title"},[e("span",{staticStyle:{color:"#3056d3"}},[t._v("Click to upload")]),t._v(" or drag and drop ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropZone-upload-limit-info"},[e("div",[t._v("PNG, JPG or JPEG")])])}],ie=(e("466d"),e("2ca0"),e("caad"),e("1276"),e("0ed1")),ne=e.n(ie),re={name:"AddStation",components:{Header:G},data:function(){return{login_i:ne.a,dragging:!1,snLoggers:[],snModems:[],maintStatus:[{value:!1,text:"OK"},{value:!0,text:"MAINTENANCE"}],factor_cal_value:[{value:!1,text:"MIN"},{value:!0,text:"SUM"}],file:"",reader:"",produksis:[],item:{station_name:null,location:null,topic:null,percent_cal:0,factor_cal:!0,maintenance_status:!1,elevation:0,sn_modem:null,sn_logger:null,image:null,latitude:null,longitude:null,nameplate_head:null,sum_operation:null,capacity:null,interzone:null,max_flow:null,pipe_diameter:null,unit_price:null,sensor_size:null,logger_type:1,created_by:null,balai:null}}},methods:{removeFile:function(){this.item.image=null,this.fileName="";var t=this.$el.querySelector('input[type="file"]');t&&(t.value="")},onChange:function(t){this.file=t.target.files.item(0),this.reader=new FileReader,this.reader.addEventListener("load",this.imageLoaded),this.reader.readAsDataURL(this.file),this.file.length?this.createFile(this.file[0]):this.dragging=!1},createFile:function(t){return t.type.match("image.*")?t.size>5e6?(alert("please check file size no over 5 MB."),void(this.dragging=!1)):(this.file=t,console.log(this.file),void(this.dragging=!1)):(alert("please select image file"),void(this.dragging=!1))},fileSelected:function(t){this.file=t.target.files.item(0),this.reader=new FileReader,this.reader.addEventListener("load",this.imageLoaded),this.reader.readAsDataURL(this.file)},imageLoaded:function(t){this.imagePath=t.target.result},submitStation:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e=new FormData,!t.item.image||t.item.image.startsWith("http")){a.next=20;break}if(!(t.item.image instanceof File)){a.next=7;break}e.append("image",t.item.image),a.next=18;break;case 7:if(!t.item.image.startsWith("data:image")){a.next=17;break}return a.next=10,fetch(t.item.image);case 10:return s=a.sent,a.next=13,s.blob();case 13:i=a.sent,e.append("image",new File([i],"image.jpg",{type:"image/jpeg"})),a.next=18;break;case 17:throw new Error("Invalid image format");case 18:a.next=27;break;case 20:return a.next=22,fetch(P.a);case 22:return n=a.sent,a.next=25,n.blob();case 25:r=a.sent,e.append("image",new File([r],"logoPDAM.png",{type:"image/png"}));case 27:for(d in o=t.item.logger_type&&t.item.logger_type.id?t.item.logger_type.id:t.item.logger_type,l=t.item.balai&&t.item.balai.id?t.item.balai.id:t.item.balai,c=Object(q["a"])(Object(q["a"])({},t.item),{},{logger_type:o,balai:l}),c)e.append(d,c[d]);return u={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t.token)}},a.next=34,f.a.post("".concat(t.$baseURL,"/pdam/station/"),e,u);case 34:t.$router.push({name:"Station"}),a.next=40;break;case 37:a.prev=37,a.t0=a["catch"](0),!a.t0.response||401!==a.t0.response.status&&403!==a.t0.response.status?console.error("Error msg: ",a.t0):t.logoutUser();case 40:case"end":return a.stop()}}),a,null,[[0,37]])})))()},updateImage:function(t){var a,e=this;t.target.files?a=t.target.files[0]:t.dataTransfer&&(a=t.dataTransfer.files[0]);var s=["image/png","image/jpeg","image/jpg"];if(s.includes(a.type)){var i=new FileReader;i.onload=function(t){e.item.image=t.target.result},i.readAsDataURL(a)}else alert("Invalid file format. Please upload a PNG, JPEG or JPG image.")},submit:function(){this.$swal({position:"top-end",width:"300px",icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),this.submitStation()}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.extractUserInfo(),a.next=3,f.a.get("".concat(t.$baseURL,"/balai/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.produksis=a.data.data})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 3:e=new Date,t.created_at=Kt()(e).format("YYYY-MM-DDThh:mm");case 5:case"end":return a.stop()}}),a)})))()},computed:{extension:function(){return this.file?this.file.name.split(".").pop():""}}},oe=re,le=(e("01f0"),e("9162"),Object(l["a"])(oe,ee,se,!1,null,"4b83b5f9",null)),ce=le.exports,de=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.item?e("div",[e("Header"),e("form",{on:{submit:function(a){return a.preventDefault(),t.update.apply(null,arguments)}}},[e("div",{staticClass:"mobile-width"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")]),e("div",{staticClass:"row my-2"},[e("div",{staticClass:"col-md subTitle"},[t._v(" Edit Data Stasiun "+t._s(t.item.station_name)+" ")]),e("div",{staticClass:"col-md d-flex justify-content-end"},[e("router-link",{staticClass:"btn btn-light border mx-4 bg-white",attrs:{to:{name:"Station"},type:"button"}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Update")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data Stasiun")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md pb-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Nama Stasiun*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.station_name,expression:"item.station_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputLo",placeholder:"Nama Stasiun",required:""},domProps:{value:t.item.station_name},on:{input:function(a){a.target.composing||t.$set(t.item,"station_name",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Lokasi")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.location,expression:"item.location"}],staticClass:"form-control",attrs:{type:"text",id:"inputLo",placeholder:"Lokasi"},domProps:{value:t.item.location},on:{input:function(a){a.target.composing||t.$set(t.item,"location",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Latitude*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.latitude,expression:"item.latitude"}],staticClass:"form-control",attrs:{type:"number",id:"inputLo",placeholder:"Latitude",step:"0.000000001",required:""},domProps:{value:t.item.latitude},on:{input:function(a){a.target.composing||t.$set(t.item,"latitude",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputLo"}},[t._v("Longitude*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.longitude,expression:"item.longitude"}],staticClass:"form-control",attrs:{type:"number",id:"inputLo",placeholder:"Longitude",step:"0.000000001",required:""},domProps:{value:t.item.longitude},on:{input:function(a){a.target.composing||t.$set(t.item,"longitude",a.target.value)}}})])])])]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Foto Stasiun")]),e("div",{staticClass:"card-body"},[t.file?t._e():e("div",[e("div",{class:["dropZone",t.dragging?"dropZone-over":""],on:{dragenter:function(a){t.dragging=!0},dragleave:function(a){t.dragging=!1}}},[e("div",{staticClass:"dropZone-info",on:{drag:t.onChange}},[t.item.image?e("img",{staticStyle:{"max-width":"120px","max-height":"60px"},attrs:{src:t.item.image}}):t._e(),t._m(0),t._m(1)]),e("input",{attrs:{type:"file"},on:{change:t.updateImage}})])])])]),e("div",{staticClass:"card pt-1"},[e("div",{staticClass:"card-header"},[t._v("Data Logger")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Serial Number Logger")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sn_logger,expression:"item.sn_logger"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Serial Number Logger"},domProps:{value:t.item.sn_logger},on:{input:function(a){a.target.composing||t.$set(t.item,"sn_logger",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Serial Number Modem")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sn_modem,expression:"item.sn_modem"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Serial Number Modem"},domProps:{value:t.item.sn_modem},on:{input:function(a){a.target.composing||t.$set(t.item,"sn_modem",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Topic MQTT*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.topic,expression:"item.topic"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Topic MQTT",required:""},domProps:{value:t.item.topic},on:{input:function(a){a.target.composing||t.$set(t.item,"topic",a.target.value)}}})])])]),e("div",{staticClass:"col-md"},[e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Maintenance Status")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.maintenance_status,expression:"item.maintenance_status"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item,"maintenance_status",a.target.multiple?e:e[0])}}},t._l(t.maintStatus,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),0)])])])])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data Produksi")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md py-1"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Produksi")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.balai.id,expression:"item.balai.id"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item.balai,"id",a.target.multiple?e:e[0])}}},t._l(t.produksis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.balai_name)+" ")])})),0)]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"UkuranSensor"}},[t._v("Ukuran Sensor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sensor_size,expression:"item.sensor_size"}],staticClass:"form-control",attrs:{type:"text",id:"UkuranSensor",placeholder:"Ukuran Sensor"},domProps:{value:t.item.sensor_size},on:{input:function(a){a.target.composing||t.$set(t.item,"sensor_size",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"HargaSatuan"}},[t._v("Harga Satuan")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.unit_price,expression:"item.unit_price"}],staticClass:"form-control",attrs:{type:"text",id:"HargaSatuan",placeholder:"Harga Satuan"},domProps:{value:t.item.unit_price},on:{input:function(a){a.target.composing||t.$set(t.item,"unit_price",a.target.value)}}})])]),4==t.item.balai.id?e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"In/OutInterzone"}},[t._v("In/Out Interzone")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.interzone,expression:"item.interzone"}],staticClass:"form-control",attrs:{type:"text",id:"In/OutInterzone",placeholder:"Interzone"},domProps:{value:t.item.interzone},on:{input:function(a){a.target.composing||t.$set(t.item,"interzone",a.target.value)}}})])]):e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Nameplate"}},[t._v("Nameplate Head")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.nameplate_head,expression:"item.nameplate_head"}],staticClass:"form-control",attrs:{type:"text",id:"Nameplate",placeholder:"Nameplate Head"},domProps:{value:t.item.nameplate_head},on:{input:function(a){a.target.composing||t.$set(t.item,"nameplate_head",a.target.value)}}})])]),4==t.item.balai.id?e("div",{staticClass:"col-md"},[e("div",{staticClass:"form-group py-1"},[e("label",{attrs:{for:"Max"}},[t._v("Max Flow")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.max_flow,expression:"item.max_flow"}],staticClass:"form-control",attrs:{type:"text",id:"Max",placeholder:"Max Flow"},domProps:{value:t.item.max_flow},on:{input:function(a){a.target.composing||t.$set(t.item,"max_flow",a.target.value)}}})]),e("div",{staticClass:"form-group py-1"},[e("label",{attrs:{for:"Diameter"}},[t._v("Diameter Pipa")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.pipe_diameter,expression:"item.pipe_diameter"}],staticClass:"form-control",attrs:{type:"number",id:"Diameter",placeholder:"Diameter Pipa",step:"0.01"},domProps:{value:t.item.pipe_diameter},on:{input:function(a){a.target.composing||t.$set(t.item,"pipe_diameter",a.target.value)}}})])]):e("div",{staticClass:"col-md"},[e("div",{staticClass:"form-group py-1"},[e("label",{attrs:{for:"Kapasitas"}},[t._v("Kapasitas")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.capacity,expression:"item.capacity"}],staticClass:"form-control",attrs:{type:"text",id:"Kapasitas",placeholder:"Kapasitas"},domProps:{value:t.item.capacity},on:{input:function(a){a.target.composing||t.$set(t.item,"capacity",a.target.value)}}})]),e("div",{staticClass:"form-group py-1"},[e("label",{attrs:{for:"Jumlah"}},[t._v("Jumlah Operasi")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.sum_operation,expression:"item.sum_operation"}],staticClass:"form-control",attrs:{type:"text",id:"Jumlah",placeholder:"Jumlah Operasi"},domProps:{value:t.item.sum_operation},on:{input:function(a){a.target.composing||t.$set(t.item,"sum_operation",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Percent"}},[t._v("Percent Cal")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.percent_cal,expression:"item.percent_cal"}],staticClass:"form-control",attrs:{type:"number",id:"Percent",placeholder:"Percent Cal",step:"0.01"},domProps:{value:t.item.percent_cal},on:{input:function(a){a.target.composing||t.$set(t.item,"percent_cal",a.target.value)}}})])]),e("div",{staticClass:"col-md py-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Factor Cal")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.factor_cal,expression:"item.factor_cal"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.item,"factor_cal",a.target.multiple?e:e[0])}}},t._l(t.factor_cal_value,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),0)])])])])])])])])],1):t._e()},ue=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropZone-title"},[e("span",{staticStyle:{color:"#3056d3"}},[t._v("Click to upload")]),t._v(" or drag and drop ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropZone-upload-limit-info"},[e("div",[t._v("PNG, JPG or JPEG")])])}],me={name:"UpdateStation",components:{Header:G},data:function(){return{dragging:!1,login_i:ne.a,produksis:[],snLoggers:[],snModems:[],maintStatus:[{value:!1,text:"OK"},{value:!0,text:"MAINTENANCE"}],factor_cal_value:[{value:!1,text:"MIN"},{value:!0,text:"SUM"}],file:null,reader:"",item:{station_name:"",location:"",topic:"",percent_cal:null,factor_cal:!0,maintenance_status:!1,elevation:null,sn_modem:"",sn_logger:"",image:"",latitude:"",longitude:"",nameplate_head:"",sum_operation:"",capacity:"",interzone:"",max_flow:"",pipe_diameter:"",unit_price:null,sensor_size:"",logger_type:null,created_by:null,balai:null}}},methods:{updateStation:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e=new FormData,!t.item.image||t.item.image.startsWith("http")){a.next=18;break}if(!(t.item.image instanceof File)){a.next=7;break}e.append("image",t.item.image),a.next=18;break;case 7:if(!t.item.image.startsWith("data:image")){a.next=17;break}return a.next=10,fetch(t.item.image);case 10:return s=a.sent,a.next=13,s.blob();case 13:i=a.sent,e.append("image",new File([i],"image.jpg",{type:"image/jpeg"})),a.next=18;break;case 17:throw new Error("Invalid image format");case 18:for(l in n=t.item.logger_type?t.item.logger_type.id:null,r=t.item.balai?t.item.balai.id:null,o=Object(q["a"])(Object(q["a"])({},t.item),{},{logger_type:n,balai:r}),o)"image"!==l&&e.append(l,o[l]);return c={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t.token)}},a.next=25,f.a.put("".concat(t.$baseURL,"/pdam/station/").concat(t.$route.params.id,"/"),e,c);case 25:t.$router.push({name:"Station"}),a.next=31;break;case 28:a.prev=28,a.t0=a["catch"](0),!a.t0.response||401!==a.t0.response.status&&403!==a.t0.response.status?console.error("Error msg: ",a.t0):t.logoutUser();case 31:case"end":return a.stop()}}),a,null,[[0,28]])})))()},updateImage:function(t){var a,e=this;t.target.files?a=t.target.files[0]:t.dataTransfer&&(a=t.dataTransfer.files[0]);var s=["image/png","image/jpeg","image/jpg"];if(s.includes(a.type)){var i=new FileReader;i.onload=function(t){e.item.image=t.target.result},i.readAsDataURL(a)}else alert("Invalid file format. Please upload a PNG, JPEG or JPG image.")},onChange:function(t){this.file=t.target.files.item(0),this.reader=new FileReader,this.reader.addEventListener("load",this.imageLoaded),this.reader.readAsDataURL(this.file),this.file.length?this.createFile(this.file[0]):this.dragging=!1},createFile:function(t){return t.type.match("image.*")?t.size>5e6?(alert("please check file size no over 5 MB."),void(this.dragging=!1)):(this.file=t,console.log(this.file),void(this.dragging=!1)):(alert("please select image file"),void(this.dragging=!1))},imageLoaded:function(t){this.item.image=t.target.result},update:function(){this.$swal({position:"top-end",width:"300px",icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),this.updateStation()}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.extractUserInfo(),a.next=3,f.a.get("".concat(t.$baseURL,"/balai/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.produksis=a.data.data})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 3:return a.prev=3,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/station/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}});case 6:e=a.sent,t.item=e.data.data,a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),!a.t0.response||401!==a.t0.response.status&&403!==a.t0.response.status?console.error("Error msg: ",a.t0):t.logoutUser();case 13:t.item.image="".concat(t.item.image);case 14:case"end":return a.stop()}}),a,null,[[3,10]])})))()}},pe=me,fe=(e("1678"),e("1ce3"),e("c6ba"),Object(l["a"])(pe,de,ue,!1,null,"02add427",null)),ve=fe.exports,he=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mobile-width"},[e("Header"),e("div",[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")]),e("div",[e("router-link",{staticClass:"btn btn-light border mt-1 bg-white",attrs:{to:{name:"Station"},type:"button"}},[t._v(" Back ")])],1)]),t.loading_i?e("div",{staticClass:"center-container"},[t._m(0)]):t._e(),e("div",{staticClass:"row"},["APPROVAL"===t.role?e("div",{staticClass:"col-md px-3"},[t.loading_i?t._e():e("TableData",{staticClass:"mx-auto",staticStyle:{"border-radius":"15px"},attrs:{station:t.station,loading_i:t.loading_i,profile:t.profile},on:{"update-filtered-data":t.updateFilteredData,"update-filtered-dataQA":t.updateFilteredDataQA}})],1):e("div",{staticClass:"col-md-6 px-1"},[t.loading_i?t._e():e("TableData",{staticClass:"mx-auto",staticStyle:{"border-radius":"15px"},attrs:{station:t.station,loading_i:t.loading_i,profile:t.profile},on:{"update-filtered-data":t.updateFilteredData,"update-filtered-dataQA":t.updateFilteredDataQA}})],1),t.debitData&&t.debitData.length>0||t.percentDataQA&&t.percentDataQA.length>0?e("div",{staticClass:"col-md-6 px-1"},[e("ChartData",{attrs:{station:t.station,ava_width:t.ava_width,debitData:t.debitData,totalData:t.totalData,label:t.label,stationQA:t.stationQA,percentDataQA:t.percentDataQA,sumDataQA:t.sumDataQA,mtcDataQA:t.mtcDataQA,labelQA:t.labelQA,gainData:t.gainData,gainTotal:t.gainTotal,profile:t.profile,loading_i:t.loading_i}})],1):t._e()]),e("Footer")],1)],1)},ge=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-container"},[e("div",{staticClass:"icon-container"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem"}})]),e("p",{staticClass:"mt-3"},[t._v("Fetching data, please wait...")])])}],be=(e("25f0"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div")}),_e=[],ye={name:"HeaderPub",data:function(){return{year:""}},methods:{curDate:function(){this.year=(new Date).getFullYear()}},mounted:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.curDate();case 1:case"end":return a.stop()}}),a)})))()}},Ce=ye,xe=Object(l["a"])(Ce,be,_e,!1,null,null,null),we=xe.exports,Se=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center pb-3",staticStyle:{height:"90vh",width:"93vw"}},[e("div",{staticClass:"content-container"},[t._m(0),e("p",{staticClass:"mt-3"},[t._v(t._s(t.msg))])])]):e("div",[e("div",{staticClass:"left-container"},[["QA","APPROVAL"].includes(t.role)||t.loading_i?e("div",{staticClass:"card box-sm comShadow m-0",staticStyle:{"box-shadow":"10px","border-radius":"10px"}},[t.profile&&"QA"===t.role?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 p-0 imgSZ"},[e("img",{staticClass:"img-fluid",staticStyle:{"object-fit":"cover","border-radius":"10px 0px 0px 10px","margin-left":"12px",width:"95%"},attrs:{src:""+t.profile.image,alt:"station-img"}})]),e("div",{staticClass:"col-md-8 my-2"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"col-md-10 col-10"},[e("div",{staticStyle:{"font-weight":"500","font-size":"1.1rem"}},[t._v(" "+t._s(t.profile.station_name)+" ")])])]),e("div",{staticStyle:{"font-size":"0.8rem",color:"gray"}},[t._v(" "+t._s(t.formatDate(t.summaryQA.data[t.summaryQA.data.length-1].date))+" s/d "+t._s(t.formatDate(t.summaryQA.data[0].date))+" ")]),e("div",{staticClass:"row mt-1 mx-0"},[e("table",{staticStyle:{width:"100%"}},[e("tr",[e("td",{staticClass:"col-6",staticStyle:{"font-size":"1rem"}},[t._v("Rata-rata Data Masuk")]),e("td",{staticClass:"col-6",staticStyle:{"font-size":"1rem"}},[t._v(": "+t._s((100*t.summaryQA.average_all_data/288).toFixed(2))+" % ")])]),e("tr",[e("td",{staticStyle:{"font-size":"1rem"}},[t._v("Target Data Seluruhnya")]),e("td",{staticStyle:{"font-size":"1rem"}},[t._v(": 100 % ")])]),e("tr",[e("td",{staticStyle:{"font-size":"1rem"}},[t._v("Data Tidak Terkirim")]),e("td",{staticStyle:{"font-size":"1rem"}},[t._v(": "+t._s((t.daysBetween-t.summaryQA.sum_all_data)/100)+" % ")])])])])])]):t._e(),t.profile&&"APPROVAL"===t.role?e("div",{staticClass:"text-center"},[e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"py-1",staticStyle:{"font-weight":"500","font-size":"1.1rem"}},[t._v(" "+t._s(t.profile.station_name)+" ")])])])]),e("div",{staticClass:"p-0 imgSZAppr"},[e("img",{staticClass:"img-fluid rounded",staticStyle:{"object-fit":"cover",width:"40%"},attrs:{src:""+t.profile.image,alt:"station-img"}})])]):t._e()]):e("TableMap",{staticClass:"mx-auto comShadow border mt-2",staticStyle:{"border-radius":"15px"},attrs:{loading_i:t.loading_i,profile:t.profile}})],1),["QA","APPROVAL"].includes(t.role)?e("div",{staticClass:"mt-2",staticStyle:{"border-radius":"15px"}},[t.dataStationQA&&"QA"===t.role?e("dataset",{staticClass:"box comShadow px-3",attrs:{"ds-data":t.dataStationQA,"ds-sortby":t.sortBy},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return[e("div",{staticClass:"row",attrs:{"data-page-count":s.dsPagecount}},[e("div",{staticClass:"col-md d-flex justify-content-end",class:{"justify-content-center":"QA"==t.role},staticStyle:{"margin-top":"1rem"}},[e("div",[t.loading_data?e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin mx-2",staticStyle:{"font-size":"1.2rem"}}):t._e(),e("DatePicker",{attrs:{name:"from",format:"YYYY-MM-DD HH:mm",type:"datetime","default-value":(new Date).setHours(0,0,0,0),"hour-options":t.hourStart,"minute-options":t.minuteStart,placeholder:"Select first date"},on:{change:t.search},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("s.d")]),e("DatePicker",{attrs:{name:"to",format:"YYYY-MM-DD HH:mm",type:"datetime","default-value":(new Date).setHours(23,55,0,0),"hour-options":t.hourEnd,"minute-options":t.minuteEnd,placeholder:"Select last date"},on:{change:t.search},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]),e("div",{staticClass:"d-flex justify-content-between px-0 py-2",class:{"px-5":t.ava_width>768}},[e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.downloadQADaily.apply(null,arguments)}}},[t.loading_dw?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),t._v("Data Per Hari ")]),e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.downloadAll.apply(null,arguments)}}},[t.loading_dw?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),t._v("Download Data ")]),e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.downloadQAHourly.apply(null,arguments)}}},[t.loading_dw?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),t._v("Download Verifikasi ")])])]),e("div",{staticClass:"modal fade",attrs:{id:"verifikasiData","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"verifikasiDataLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.verifikasiDataUpload.apply(null,arguments)}}},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"verifikasiDataLabel"}},[t._v(" Verifikasi ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[e("div",[e("label",[e("input",{attrs:{type:"file",id:"file"},on:{change:function(a){return t.onChangeFileUpload(a)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.formatVerifikasi.apply(null,arguments)}}},[t._v(" Download Format ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Upload Verifikasi ")])])])])])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white table-bordered"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{staticClass:"thClass",attrs:{scope:"col"}},[t._v("#")]),t._l(t.colsQA,(function(a,s){return e("th",{key:a.field,staticClass:"thClass",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.index;return[e("tr",[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(t.formatDate(s.date)))]),e("td",[t._v(t._s(s.sum))]),e("td",[t._v(t._s(s.percentage)+" %")]),e("td",[t._v(t._s(s.maintenance))])])]}}],null,!0)})],1)])])]),e("div",{staticClass:"d-flex flex-md-row flex-column justify-content-end align-items-center"},[e("dataset-pager",{staticStyle:{"font-size":"0.9rem"}})],1)]}}],null,!1,4120742409)}):t._e(),"APPROVAL"===t.role?e("div",[t.loading_appr?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("div",{staticClass:"content-container"},[t._m(3),e("p",[t._v(t._s(t.msgAppr))])])]):t._e(),e("div",{staticClass:"col-md d-flex justify-content-center"},[e("div",[e("DatePicker",{attrs:{name:"from",format:"YYYY-MM-DD HH:mm",type:"datetime","minute-step":5,placeholder:"Select first date"},on:{change:t.searchAppr},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("s.d")]),e("DatePicker",{attrs:{name:"to",format:"YYYY-MM-DD HH:mm",type:"datetime","minute-step":5,placeholder:"Select last date"},on:{change:t.searchAppr},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]),t.dataStationApproval?e("dataset",{staticClass:"box comShadow px-3",attrs:{"ds-data":t.dataStationApproval,"ds-sortby":t.sortBy},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return[e("div",{staticClass:"row",attrs:{"data-page-count":s.dsPagecount}}),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[t.dataStationApproval.length>0?e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white table-bordered"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{staticClass:"thClass",attrs:{scope:"col"}},[t._v("#")]),t._l(t.colsApproval,(function(a,s){return e("th",{key:a.field,staticClass:"thClass",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.index;return[e("tr",{staticClass:"align-middle"},[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(t.formatDate(s.time)+" "+t.formatTime(s.time)))]),t._l(s.sensor_data,(function(a,s){return e("td",{key:s},[t._v(" "+t._s(a.value)+" "+t._s(a.notation)+" ")])})),e("td",[e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(a){return t.approveRange(s.time,s.time)}}},[t._v("Approve")])])],2)]}}],null,!0)})],1):e("div",{staticClass:"px-1"},[t._v(" No Data to Approve ")])])])]),e("div",{staticClass:"d-flex flex-md-row flex-column justify-content-end align-items-center"},[e("dataset-pager",{staticStyle:{"font-size":"0.9rem"}})],1)]}}],null,!1,176468062)}):t._e()],1):t._e()],1):e("div",{staticClass:"mt-2",staticStyle:{"border-radius":"15px"}},["PTAB"===t.produksi||"SuperAdmin"===t.role?e("div",{staticClass:"mx-3"},[e("p",[t._v(t._s(t.error_msg))]),null!==t.error_msg?e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",title:"Upload Sensor Data","data-bs-toggle":"modal","data-bs-target":"#sDataZero"}},[t.loading_upload?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),t._m(1),t._v(" Upload Sensor Data ")]):t._e(),e("div",{staticClass:"modal fade",attrs:{id:"sDataZero","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"sDataZeroLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.sensorDataUpload.apply(null,arguments)}}},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",[e("label",[e("input",{attrs:{type:"file",id:"file",required:""},on:{change:function(a){return t.onChangeFileUpload(a)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.formatSensorData.apply(null,arguments)}}},[t._v(" Download Format ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Upload Data Sensor ")])])])])])])]):t._e(),t.dataStation?e("dataset",{staticClass:"box comShadow px-3",attrs:{"ds-data":t.dataStation,"ds-sortby":t.sortBy,"ds-search-in":["status_data"]},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return["UserVerifikasi"==t.username?e("div",{staticClass:"mt-2"},[e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",title:"Verifikasi","data-bs-toggle":"modal","data-bs-target":"#verifikasiData"}},[t.loading_upload?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),t._v("Upload Verifikasi ")]),e("div",{staticClass:"modal fade",attrs:{id:"verifikasiData","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"verifikasiDataLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.verifikasiDataUpload.apply(null,arguments)}}},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"verifikasiDataLabel"}},[t._v(" Verifikasi ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[e("div",[e("label",[e("input",{attrs:{type:"file",id:"file"},on:{change:function(a){return t.onChangeFileUpload(a)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.formatVerifikasi.apply(null,arguments)}}},[t._v(" Download Format ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Upload Verifikasi ")])])])])])])]):t._e(),e("div",{staticClass:"row",attrs:{"data-page-count":s.dsPagecount}},[e("div",{staticClass:"col-md-1 d-flex justify-content-start",staticStyle:{"margin-top":"1rem"}},[e("div",{staticClass:"dropdown col"},[e("button",{staticClass:"btn btn-sm btn-primary dropdown-toggle",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Summary Data"}},[e("span",[e("i",{staticClass:"zmdi zmdi-search"})])]),e("ul",{staticClass:"dropdown-menu col",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[e("li",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"}},[t._v(" Jumlah Data: "+t._s(t.summary.total_data)+" ")]),e("li",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"}},[t._v(" Rata Debit: "+t._s(t.summary.average_flow)+" L/s ")]),e("li",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"}},[t._v(" Total Volume: "+t._s(t.summary.sum_volume)+" m³ ")]),"SuperAdmin"==t.role?e("li",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"}},[t._v(" Persentase Data: "+t._s(t.summary.data_precentage)+" % ")]):t._e(),e("li",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"}},[t._v(" Totalizer Processed: "+t._s(t.summary.sum_volume_ch6_processed)+" m³ ")])])])]),e("div",{staticClass:"col-md-1 d-flex justify-content-start",staticStyle:{"margin-top":"1rem"}},["PTAB"===t.produksi?e("div",{staticClass:"dropdown col"},[e("button",{staticClass:"btn btn-sm btn-primary dropdown-toggle",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Upload File"}},[t.loading_upload?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),e("span",[e("i",{staticClass:"zmdi zmdi-upload"})])]),e("ul",{staticClass:"dropdown-menu col",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[e("li",{staticClass:"dropdown-submenu"},[e("a",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#thresholdData",href:"#"}},[t._v("Threshold")])]),e("li",{staticClass:"dropdown-submenu"},[e("div",{staticClass:"dropdown-divider"}),e("a",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#sensorData",href:"#"}},[t._v("Data Sensor")])])])]):e("div",["DIREKSI"!==t.role?e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",title:"Upload Threshold","data-bs-toggle":"modal","data-bs-target":"#thresholdData"}},[t.loading_upload?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),e("span",[e("i",{staticClass:"zmdi zmdi-upload"})])]):t._e()])]),e("div",{staticClass:"modal fade",attrs:{id:"thresholdData","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"thresholdDataLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.tresholdDataUpload.apply(null,arguments)}}},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"thresholdDataLabel"}},[t._v(" Upload Threshold ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[e("div",[e("label",[e("input",{attrs:{type:"file",id:"file"},on:{change:function(a){return t.onChangeFileUpload(a)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.formatThreshold.apply(null,arguments)}}},[t._v(" Download Format ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Upload Threshold ")])])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"sensorData","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"sensorDataLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.sensorDataUpload.apply(null,arguments)}}},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"sensorDataLabel"}},[t._v(" Upload Data Sensor ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[e("div",[e("label",[e("input",{attrs:{type:"file",id:"file"},on:{change:function(a){return t.onChangeFileUpload(a)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.formatSensorData.apply(null,arguments)}}},[t._v(" Download Format ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Upload Data Sensor ")])])])])])]),e("div",{staticClass:"col-md d-flex justify-content-end",class:{"justify-content-center":"QA"==t.role},staticStyle:{"margin-top":"1rem"}},[e("div",[t.loading_data?e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin mx-2",staticStyle:{"font-size":"1.2rem"}}):t._e(),e("DatePicker",{attrs:{name:"from",type:"datetime",format:"YYYY-MM-DD HH:mm","default-value":(new Date).setHours(0,0,0,0),placeholder:"Select first date","minute-step":5},on:{change:t.search},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("-")]),e("DatePicker",{attrs:{name:"to",type:"datetime",format:"YYYY-MM-DD HH:mm","default-value":(new Date).setHours(23,55,0,0),placeholder:"Select last date","minute-step":5},on:{change:t.search},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]),"SuperAdmin"==t.role?e("div",{staticClass:"col-md-1 d-flex justify-content-end",staticStyle:{"margin-top":"1.2rem"}},[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-sm btn-primary dropdown-toggle",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Download sesuai filter tanggal"}},[t.loading_dw?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),e("span",[e("i",{staticClass:"zmdi zmdi-download"})])]),e("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[e("li",[e("a",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.downloadAll.apply(null,arguments)}}},[t._v("Semua Data")])]),e("li",[e("a",{staticClass:"dropdown-item py-0",staticStyle:{"font-size":"0.9rem"},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.downloadDaily.apply(null,arguments)}}},[t._v("Data per hari")])])])])]):e("div",{staticClass:"col-md-1 d-flex justify-content-end",staticStyle:{"margin-top":"1.2rem"}},[e("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{"font-size":"0.8rem"},attrs:{type:"button",title:"Download sesuai filter tanggal"},on:{click:function(a){return a.preventDefault(),t.downloadAll.apply(null,arguments)}}},[t.loading_dw?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),e("span"),t._v(" "),e("i",{staticClass:"zmdi zmdi-download"})])]),"SuperAdmin"===t.role?e("div",{staticClass:"p-0 col-md-1 d-flex justify-content-end",staticStyle:{"margin-top":"1.2rem"},attrs:{"data-page-count":s.dsPagecount}},[e("dataset-search",{staticClass:"p-0",staticStyle:{"font-size":"0.8rem"},attrs:{"ds-search-placeholder":"status"}})],1):t._e()]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white table-bordered"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{staticClass:"thClass",attrs:{scope:"col"}},[t._v("#")]),t._l(t.cols,(function(a,s){return e("th",{key:a.field,staticClass:"thClass",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.index;return[e("tr",[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(t.formatDate(s.time)))]),e("td",[t._v(t._s(t.formatTime(s.time)))]),t._l(s.sensor_data,(function(a,s){return e("td",{key:s},[e("span",[t._v(t._s(a.value)+" ")]),null!==a.value?e("span",[t._v(t._s(a.notation))]):t._e()])})),"SuperAdmin"==t.role?e("td",["OK"==s.status?e("div",{staticStyle:{"font-size":"0.8rem"}},[e("span",{staticStyle:{color:"#219653"}},[t._v(t._s(s.status))])]):"maintenance"==s.status?e("div",{staticStyle:{"font-size":"0.8rem"}},[e("span",{staticStyle:{color:"black"}},[t._v("MTC")])]):"Min Threshold"==s.status?e("div",{staticStyle:{"font-size":"0.8rem"}},[e("span",{staticStyle:{color:"#00B2FF"}},[t._v(t._s(s.status))])]):"Max Threshold"==s.status?e("div",{staticStyle:{"font-size":"0.8rem"}},[e("span",{staticStyle:{color:"#D34053"}},[t._v(t._s(s.status))])]):e("div",[t._v(t._s(s.status))])]):t._e(),"SuperAdmin"==t.role?e("td",[t._v(t._s(s.status_data))]):t._e()],2)]}}],null,!0)})],1)])])]),e("div",{staticClass:"d-flex flex-md-row flex-column justify-content-end align-items-center"},[e("dataset-pager",{staticStyle:{"font-size":"0.9rem"}})],1)]}}],null,!1,3204573694)}):t._e()],1)])])},De=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"icon-container"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",[e("i",{staticClass:"zmdi zmdi-upload"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"sDataZeroLabel"}},[t._v(" Upload Data Sensor ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"icon-container"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin"})])}],Ae=(e("a630"),e("3ca3"),e("8ba4"),e("4d90"),e("ddb0"),e("2b3d"),e("9861"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row map"},[t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"2rem","margin-right":"20px"}})]):t._e(),t.station&&!t.loading_i&&t.profile&&t.center?e("v-map",{staticClass:"box",staticStyle:{"border-radius":"15px"},attrs:{zoom:15,center:t.center,options:{attributionControl:!1,zoomControl:!1}},on:{"update:zoom":t.zoomUpdated,"update:center":t.centerUpdated}},[e("v-icondefault"),e("v-tilelayer",{attrs:{url:t.url,attribution:t.attribution}}),e("v-control",{staticClass:"example-custom-control m-2",staticStyle:{"border-radius":"10px",opacity:"75%"},attrs:{position:"bottomright"}},[e("div",{staticClass:"py-2 px-2",staticStyle:{"font-weight":"bold"}},[e("div",[e("img",{staticClass:"px-1",attrs:{src:t.st_im}}),t._v("Stasiun")])])]),t.latLng&&t.profile&&t.center?e("v-marker",{attrs:{"lat-lng":t.latLng}},[e("v-icon",[e("img",{staticClass:"iconSZ",attrs:{src:t.st_im}})]),e("v-popup",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"imgSZ",attrs:{src:t.st_i}}),e("div",{staticClass:"my-1",staticStyle:{"font-weight":"600"}},[t._v(" "+t._s(t.profile.station_name)+" ")]),"SuperAdmin"==t.role?e("router-link",{staticClass:"btn btn-success d-flex flex-row justify-content-center p-0",attrs:{type:"button",to:"/station/update/"+t.profile.station_serial_id}},[e("img",{staticClass:"mx-1",attrs:{src:t.edit_i}}),e("span",{staticStyle:{"font-size":"0.8rem"}},[t._v("Edit")])]):t._e()],1)])],1):t._e(),e("v-control-scale",{attrs:{position:"topright",imperial:!1,metric:!0}})],1):t._e()],1)}),ke=[],ze={name:"TableMap",props:["loading_i"],components:{"v-map":X["a"],"v-tilelayer":tt["a"],"v-icondefault":at["a"],"v-marker":et["a"],"v-popup":st["a"],"v-control-scale":it["a"],"v-icon":nt["a"],"v-control":rt["a"]},data:function(){return{url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"",zoom:null,center:void 0,st_im:lt.a,st_i:dt.a,edit_i:mt.a,station:[],profile:null}},computed:{latLng:function(){var t=Number(this.profile.latitude),a=Number(this.profile.longitude);return isNaN(t)||isNaN(a)?null:[t,a]}},methods:{centerUpdated:function(t){this.center=t},zoomUpdated:function(t){this.zoom=t},loadProfile:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/pdam/station/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){200==a.status&&(t.profile=a.data.data,t.center=[t.profile.latitude,t.profile.longitude])})).catch((function(a){t.e_code=a.response.status,t.msg="An error occurred on the server. Please try again later."}));case 2:case"end":return a.stop()}}),a)})))()}},created:function(){this.extractUserInfo()},mounted:function(){this.loadProfile()}},je=ze,Re=(e("91b0"),e("82b2"),Object(l["a"])(je,Ae,ke,!1,null,"477a1c6f",null)),Pe=Re.exports,Le={name:"TableData",components:{Dataset:Ga["a"],DatasetItem:Ja["a"],DatasetPager:qa["a"],TableMap:Pe,DatasetSearch:Wa["a"]},props:["station","loading_i","profile"],data:function(){return{startDate:null,endDate:null,loading_data:!1,dataStation:null,dataStationQA:null,dataStationApproval:null,summary:null,summaryQA:null,summaryApproval:null,cols:[],colsQA:[],colsApproval:[],nama:"",loading_upload:!1,loading_dw:!1,loading_appr:!0,uploadVal:null,ava_width:null,msg:"Fetching data, please wait...",msgAppr:"Fetching approval data...",hourStart:Array.from({length:1}).map((function(t,a){return a+0})),hourEnd:Array.from({length:1}).map((function(t,a){return a+23})),minuteStart:Array.from({length:1}).map((function(t,a){return a+0})),minuteEnd:Array.from({length:1}).map((function(t,a){return a+55})),error_msg:null}},computed:{sortBy:function(){return this.cols.reduce((function(t,a){return a.sort&&("asc"===a.sort?t.push(a.field):t.push("-"+a.field)),t}),[])},daysBetween:function(){var t=new Date(this.summaryQA.data[this.summaryQA.data.length-1].date),a=new Date(this.summaryQA.data[0].date),e=864e5,s=Math.round(Math.abs((t-a)/e))+1;return 288*s}},watch:{dataStation:function(t){this.$emit("update-filtered-data",t)},dataStationQA:function(t){this.$emit("update-filtered-dataQA",t)},dataStationApproval:function(t){this.$emit("update-filtered-dataApproval",t)}},methods:{approveRange:function(t,a){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function s(){var i,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t?Kt()(t).format("YYYY-MM-DD HH:mm"):null,n=a?Kt()(a).format("YYYY-MM-DD HH:mm"):null,s.prev=2,s.next=5,f.a.get("".concat(e.$baseURL,"/pdam/approve_taksasi/").concat(e.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(e.token)},params:{from:i,until:n}});case 5:r=s.sent,console.log(r),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](2),console.log(s.t0);case 12:e.$swal({position:"top-end",width:"300px",icon:"success",title:"Approve berhasil",showConfirmButton:!1,timer:1e3}),e.loadDataApproval();case 14:case"end":return s.stop()}}),s,null,[[2,9]])})))()},formatNumber:function(t){return t=Number(t).toString(),t.replace(/\B(?=(\d{3})+(?!\d))/g,",")},loadData:function(){var t=arguments,a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:null,i=t.length>1&&void 0!==t[1]?t[1]:null,a.loading_data=!0,e.next=5,f.a.get("".concat(a.$baseURL,"/pdam/station_data/").concat(a.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(a.token)},params:{from:s,until:i}}).catch((function(t){setTimeout((function(){"No sensor data found."==t.response.data.message?(a.dataStation=[],a.error_msg=t.response.data.message,a.loading_i=!1):console.log(t)}),100)}));case 5:if(n=e.sent,200==n.status){for(a.nama=n.data.data[0].station_name,a.summary=n.data.data[0],a.summary.average_flow=a.formatNumber(a.summary.average_flow.toFixed(2)),a.summary.data_precentage=a.formatNumber(a.summary.data_precentage.toFixed(2)),a.summary.sum_volume=a.formatNumber(a.summary.sum_volume.toFixed(2)),a.dataStation=n.data.data[0].chart,a.dataStation.forEach((function(t){t.sensor_data.forEach((function(t){null===t.value||isNaN(t.value)||(Number.isInteger(Number(t.value))?t.value=Number(t.value).toString():t.value=parseFloat(Number(t.value).toFixed(2)))}))})),r=a.dataStation[0].sensor_data,a.cols=[{name:"Tanggal"},{name:"Waktu"}],o=0;o<r.length;o++)a.cols.push({name:r[o].sensor_name});"SuperAdmin"==a.role&&a.cols.push({name:"Status"},{name:"Status Data"}),a.loading_data=!1}case 7:case"end":return e.stop()}}),e)})))()},loadDataQA:function(){var t=arguments,a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:null,i=t.length>1&&void 0!==t[1]?t[1]:null,a.loading_data=!0,e.next=5,f.a.get("".concat(a.$baseURL,"/pdam/QA/").concat(a.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(a.token)},params:{from:s,until:i}}).catch((function(t){console.log(t)}));case 5:n=e.sent,a.dataStationQA=n.data[0].data,a.summaryQA=n.data[0],a.nama=n.data[0].station_name,a.colsQA=[{name:"Tanggal"},{name:"Jumlah Data"},{name:"Persen Data"},{name:"Jumlah Gangguan"}],200==n.status&&(a.loading_data=!1);case 11:case"end":return e.stop()}}),e)})))()},loadDataApproval:function(){var t=arguments,a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:null,i=t.length>1&&void 0!==t[1]?t[1]:null,a.loading_appr=!0,e.next=5,f.a.get("".concat(a.$baseURL,"/pdam/approval/detail/").concat(a.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(a.token)},params:{from:s,until:i}}).catch((function(t){console.log(t)}));case 5:if(n=e.sent,200==n.status){for(a.loading_appr=!1,a.dataStationApproval=n.data.data[0].chart,a.colsApproval=[{name:"Tanggal"}],a.dataStationApproval.forEach((function(t){t.sensor_data.forEach((function(t){null===t.value||isNaN(t.value)||(Number.isInteger(Number(t.value))?t.value=Number(t.value).toString():t.value=parseFloat(Number(t.value).toFixed(2)))}))})),r=a.dataStationApproval[0].sensor_data,o=0;o<r.length;o++)a.colsApproval.push({name:r[o].sensor_name});a.colsApproval.push({name:"Action"})}case 7:case"end":return e.stop()}}),e)})))()},search:function(){var t=this.startDate?Kt()(this.startDate).format("YYYY-MM-DD HH:mm"):null,a=this.endDate?Kt()(this.endDate).format("YYYY-MM-DD HH:mm"):null,e=Kt()(this.endDate).diff(Kt()(this.startDate),"days");["QA","APPROVAL"].includes(this.role)?e>1e4?"QA"===this.role?this.loadDataQA(null,null):"APPROVAL"===this.role&&this.loadDataApproval(null,null):"QA"===this.role?this.loadDataQA(t,a):"APPROVAL"===this.role&&this.loadDataApproval(t,a):e>30?this.loadData(null,null):this.loadData(t,a)},searchAppr:function(){var t=this.startDate?Kt()(this.startDate).format("YYYY-MM-DD HH:mm"):null,a=this.endDate?Kt()(this.endDate).format("YYYY-MM-DD HH:mm"):null,e=Kt()(this.endDate).diff(Kt()(this.startDate),"days");e>1e4?"QA"===this.role?this.loadDataQA(null,null):"APPROVAL"===this.role&&this.loadDataApproval(null,null):"QA"===this.role?this.loadDataQA(t,a):"APPROVAL"===this.role&&this.loadDataApproval(t,a)},approveSelected:function(t){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.loading_data=!0,t&&0!==t.length){e.next=5;break}return console.error("No chart data available."),a.loading_data=!1,e.abrupt("return");case 5:return s=Object(Pt["a"])(t).sort((function(t,a){return new Date(t.time)-new Date(a.time)})),i=s[0].time,n=s[s.length-1].time,console.log("From:",i),console.log("Until:",n),e.prev=10,e.next=13,f.a.get("".concat(a.$baseURL,"/pdam/approve_taksasi/").concat(a.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(a.token)},params:{from:i,until:n}});case 13:r=e.sent,200===r.status&&console.log("Approval successful:",r.data),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](10),console.error("API request failed:",e.t0);case 20:return e.prev=20,a.loading_data=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[10,17,20,23]])})))()},formatDatePicker:function(t){if(!t)return null;var a=new Date(t),e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),n=String(a.getHours()).padStart(2,"0"),r=String(a.getMinutes()).padStart(2,"0");return"".concat(e,"-").concat(s,"-").concat(i,"T").concat(n,":").concat(r)},click:function(t,a){var e,s=this.cols[a];t.shiftKey||this.cols.forEach((function(t){t.field!==s.field&&(t.sort="")})),s.sort||(e="asc"),"desc"===s.sort&&(e=t.shiftKey?"":"asc"),"asc"===s.sort&&(e="desc"),s.sort=e},formatDate:function(t){var a=new Date(t),e={day:"numeric",month:"short",year:"numeric",timeZone:"Asia/Jakarta"};return new Intl.DateTimeFormat("en-GB",e).format(a)},formatTime:function(t){var a=new Date(t),e={hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"};return new Intl.DateTimeFormat("en-GB",e).format(a)},downloadAll:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,t.loading_dw=!0,a.prev=3,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/station_data/download/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s},responseType:"blob"});case 6:i=a.sent,200===i.status&&(n=i.headers["content-disposition"],r="download",n&&(o=n.match(/filename="(.+)"/),o&&o[1]&&(r=o[1])),r=null!=e&&null!=s?"Laporan Pembacaan Sensor ".concat(t.nama," ").concat(e," sd ").concat(s,".xlsx"):"Laporan Pembacaan Sensor ".concat(t.nama,".xlsx"),l=window.URL.createObjectURL(new Blob([i.data],{type:i.headers["content-type"]})),c=document.createElement("a"),c.href=l,c.setAttribute("download",r),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c),window.URL.revokeObjectURL(l)),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log(a.t0);case 13:return a.prev=13,t.loading_dw=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})))()},downloadQADaily:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,t.loading_dw=!0,a.prev=3,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/QA/Download/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s},responseType:"blob"});case 6:i=a.sent,200===i.status&&(n=i.headers["content-disposition"],r="download",n&&(o=n.match(/filename="(.+)"/),o&&o[1]&&(r=o[1])),r=null!=e&&null!=s?"Data QA Station ".concat(t.profile.station_name," ").concat(e," sd ").concat(s):"Data QA Station ".concat(t.profile.station_name),l=window.URL.createObjectURL(new Blob([i.data],{type:i.headers["content-type"]})),c=document.createElement("a"),c.href=l,c.setAttribute("download",r),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c),window.URL.revokeObjectURL(l)),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log(a.t0);case 13:return a.prev=13,t.loading_dw=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})))()},downloadQAHourly:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,t.loading_dw=!0,a.prev=3,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/QA/Download/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s},responseType:"blob"});case 6:i=a.sent,200===i.status&&(n=i.headers["content-disposition"],r="download",n&&(o=n.match(/filename="(.+)"/),o&&o[1]&&(r=o[1])),r=null!=e&&null!=s?"Laporan Pembacaan Sensor ".concat(t.nama," ").concat(e," sd ").concat(s):"Laporan Pembacaan Sensor ".concat(t.nama),l=window.URL.createObjectURL(new Blob([i.data],{type:i.headers["content-type"]})),c=document.createElement("a"),c.href=l,c.setAttribute("download",r),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c),window.URL.revokeObjectURL(l)),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log(a.t0);case 13:return a.prev=13,t.loading_dw=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})))()},downloadDaily:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n,r,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,t.loading_dw=!0,a.prev=3,a.next=6,f.a.get("".concat(t.$baseURL,"/pdam/station_data/download/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s,per_day:!0},responseType:"blob"});case 6:i=a.sent,200===i.status&&(n=i.headers["content-disposition"],r="download",n&&(o=n.match(/filename="(.+)"/),o&&o[1]&&(r=o[1])),r=null!=e&&null!=s?"Data per hari ".concat(t.nama," ").concat(e," sd ").concat(s):"Data per hari ".concat(t.nama),l=window.URL.createObjectURL(new Blob([i.data],{type:i.headers["content-type"]})),c=document.createElement("a"),c.href=l,c.setAttribute("download",r),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c),window.URL.revokeObjectURL(l)),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),console.log(a.t0);case 13:return a.prev=13,t.loading_dw=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})))()},formatThreshold:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/download_format_treshold/"),{headers:{Authorization:"Bearer ".concat(t.token)},responseType:"blob"});case 3:e=a.sent,s=new Blob([e.data],{type:e.data.type}),i=document.createElement("a"),i.href=URL.createObjectURL(s),i.setAttribute("download","Format Input Threshold.xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),console.error("Error downloading the file",a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},formatSensorData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/download_format_sensor_data/"),{headers:{Authorization:"Bearer ".concat(t.token)},responseType:"blob"});case 3:e=a.sent,s=new Blob([e.data],{type:e.data.type}),i=document.createElement("a"),i.href=URL.createObjectURL(s),i.setAttribute("download","Format Input Sensor Data.xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),console.error("Error downloading the file",a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},formatVerifikasi:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/rekap_verifikasi/Download/Format/"),{headers:{Authorization:"Bearer ".concat(t.token)},responseType:"blob"});case 3:e=a.sent,s=new Blob([e.data],{type:e.data.type}),i=document.createElement("a"),i.href=URL.createObjectURL(s),i.setAttribute("download","Format Input Verifikasi.xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),console.error("Error downloading the file",a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},onChangeFileUpload:function(t){this.csvFile=t.target.files[0]},tresholdDataUpload:function(){var t=this,a=new FormData;a.append("station_serial_id",this.$route.params.id),a.append("file",this.csvFile),f.a.post("".concat(this.$baseURL,"/pdam/upload_treshold/").concat(this.$route.params.id,"/"),a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(this.token)}}).then((function(a){204==a.status&&(t.csv_code="File uploaded successfully"),t.$swal({position:"top-end",width:"300px",icon:"success",title:"Upload berhasil",showConfirmButton:!1,timer:1500}),setTimeout((function(){location.reload()}),1e3)})).catch((function(a){console.log(a),t.csv_code="Error uploading the file. Please try again."}))},sensorDataUpload:function(){var t=this,a=new FormData;a.append("station_serial_id",this.$route.params.id),a.append("files",this.csvFile),f.a.post("".concat(this.$baseURL,"/pdam/sensor_data/upload/").concat(this.$route.params.id,"/"),a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(this.token)}}).then((function(a){204==a.status&&(t.csv_code="File uploaded successfully"),t.$swal({position:"top-end",width:"300px",icon:"success",title:"Upload berhasil",showConfirmButton:!1,timer:1500}),setTimeout((function(){location.reload()}),1e3)})).catch((function(a){console.log(a),t.csv_code="Error uploading the file. Please try again."}))},verifikasiDataUpload:function(){var t=this,a=new FormData;a.append("station_serial_id",this.$route.params.id),a.append("file",this.csvFile),f.a.post("".concat(this.$baseURL,"/pdam/rekap_verifikasi/Upload/").concat(this.$route.params.id,"/"),a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(this.token)}}).then((function(a){204==a.status&&(t.csv_code="File uploaded successfully",location.reload())})).catch((function(a){console.log(a),t.csv_code="Error uploading the file. Please try again."}))}},created:function(){this.extractUserInfo(),"QA"===this.role?this.loadDataQA():"APPROVAL"===this.role?this.loadDataApproval():this.loadData(),this.ava_width=screen.availWidth}},Te=Le,$e=(e("4edd"),e("69e0"),Object(l["a"])(Te,Se,De,!1,null,"16f7ca38",null)),Oe=$e.exports,Ue=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",["QA"!==t.role?e("div",{staticClass:"card box-sm mt-2 comShadow mb-2",staticStyle:{"box-shadow":"10px","border-radius":"10px"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 p-0 imgSZ"},[e("img",{staticClass:"img-fluid",staticStyle:{"object-fit":"cover","border-radius":"10px 0px 0px 0px","margin-left":"12px",width:"94%"},attrs:{src:""+t.station.image,alt:"station-img"}})]),e("div",{staticClass:"col-md-8 my-0"},[e("div",{staticClass:"d-flex align-items-center mx-2"},[e("div",{staticClass:"col-md-12 col-10"},[e("div",{staticStyle:{"font-weight":"500","font-size":"1.1rem"}},[t._v(" "+t._s(t.station.station_name)+" ")])])]),t.profile?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Lokasi")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.profile.location))])]),"Distribusi"==t.profile.balai.balai_name?e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("In/Out Interzone")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.profile.interzone))])]):e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Nameplate Head")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.profile.nameplate_head))])])]),"Distribusi"==t.profile.balai.balai_name?e("div",{staticClass:"col-md-6 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v(" Max Flow")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.profile.max_flow)+" L/s")])]),e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Diameter Pipa")]),e("div",{staticClass:"info-value"},[t._v(" "+t._s(t.profile.diameter)+" mm ")])])]):e("div",{staticClass:"col-md-6 mx-0"},[e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Jumlah Operasi")]),e("div",{staticClass:"info-value"},[t._v(t._s(t.profile.jumlah_operasi))])]),e("div",{staticClass:"my-1 mx-2"},[e("div",{staticClass:"info-label"},[t._v("Kapasitas")]),e("div",{staticClass:"info-value"},[t._v(" "+t._s(t.profile.kapasitas)+" L/s ")])])])]):t._e()])]),e("div",[e("div",{staticClass:"mx-auto bg-white mb-2",staticStyle:{"border-radius":"15px"}},[e("div",{staticClass:"d-flex pt-2 px-2 justify-content-between"},[e("h6",[t._v(" Data "+t._s(t.station.chart[0].sensor_data[0].sensor_name)+" "),t._v(" ("+t._s(t.station.chart[0].sensor_data[0].notation)+") ")]),e("div",["APPROVAL"===t.role?e("button",{staticClass:"btn btn-sm btn-success",staticStyle:{"font-size":"0.8rem"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#approveTaksasi",type:"button"}},[e("i",{staticClass:"zmdi zmdi-check"}),t._v(" Approve ")]):t._e(),"SuperAdmin"==t.role?e("button",{staticClass:"btn btn-sm btn-primary mx-1",staticStyle:{"font-size":"0.8rem"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#taksasiData",type:"button"}},[t.loadingTaksasi?e("i",{staticClass:"zmdi zmdi-rotate-right zmdi-hc-spin",staticStyle:{"font-size":"1.2rem","margin-right":"3px"}}):t._e(),e("i",{staticClass:"zmdi zmdi-edit"}),t._v(" Taksasi ")]):t._e()])]),e("div",{staticClass:"modal fade",attrs:{id:"taksasiData","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"taksasiDataLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.taksasiRange.apply(null,arguments)}}},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",[e("DatePicker",{attrs:{name:"from",type:"datetime",format:"DD/MM/YYYY HH:mm",placeholder:"Select first date","minute-step":5},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("s.d")]),e("DatePicker",{attrs:{name:"to",type:"datetime",format:"DD/MM/YYYY HH:mm",placeholder:"Select last date","minute-step":5},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]),t._m(1)])])])]),e("div",{staticClass:"modal fade",attrs:{id:"approveTaksasi","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"approveTaksasiLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.approveRange.apply(null,arguments)}}},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",[e("DatePicker",{attrs:{name:"from",type:"datetime",format:"DD/MM/YYYY HH:mm","minute-step":5,placeholder:"Select first date"},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),e("label",{staticClass:"px-2",staticStyle:{"font-size":"0.8rem","font-weight":"normal"},attrs:{for:"to"}},[t._v("s.d")]),e("DatePicker",{attrs:{"minute-step":5,name:"to",type:"datetime",format:"DD/MM/YYYY HH:mm",placeholder:"Select last date"},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}})],1)]),t._m(3)])])])]),"SuperAdmin"==t.role?e("LineChartFiltered",{tag:"Chart",staticClass:"p-0 pr-0 pt-1 pb-0",staticStyle:{height:"29vh"},attrs:{label:t.formatAllDates(t.label),"chart-data":[t.debitData,null,null],title1:t.station.chart[0].sensor_data[0].sensor_name+" ("+t.station.chart[0].sensor_data[0].notation+")",title2:null,title3:null}}):e("LineChartFiltered",{tag:"Chart",staticClass:"p-0 pr-0 pt-1 pb-0",staticStyle:{height:"29vh"},attrs:{label:t.formatAllDates(t.label),"chart-data":[t.debitData,null,null],title1:t.station.chart[0].sensor_data[0].sensor_name+" ("+t.station.chart[0].sensor_data[0].notation+")",title2:null}})],1)]),e("div",[e("div",[e("div",{staticClass:"border mx-auto bg-white mb-2"},[e("div",[e("h6",{staticClass:"px-2 pt-2"},[t._v(" Data "+t._s(t.station.chart[0].sensor_data[1].sensor_name)+" "),t._v(" ("+t._s(t.station.chart[0].sensor_data[1].notation)+") ")])]),(t.role,e("TotalChartFiltered",{tag:"Chart",staticClass:"p-0 pr-0 pt-1 pb-0",staticStyle:{height:"29vh"},attrs:{label:t.formatAllDates(t.label),"chart-data":[t.totalData,null],title1:t.station.chart[0].sensor_data[1].sensor_name+" ("+t.station.chart[0].sensor_data[1].notation+")",title2:null}}))],1)])])]):t._e(),"QA"==t.role&&t.stationQA?e("div",[e("div",{staticClass:"comShadow",staticStyle:{"border-radius":"15px"}},[e("div",{staticClass:"box-sm border mx-auto bg-white mb-2",staticStyle:{"border-radius":"15px"}},[t._m(4),e("TotalChartBarFiltered",{tag:"Chart",staticStyle:{height:"25vh"},attrs:{label:t.formatAllDatesQA(t.labelQA),"chart-data":t.sumDataQA,title:"Jumlah Data"}})],1)]),e("div",{staticClass:"comShadow",staticStyle:{"border-radius":"15px"}},[e("div",{staticClass:"box-sm border mx-auto bg-white mb-2",staticStyle:{"border-radius":"15px"}},[t._m(5),e("TotalChartBarFiltered",{tag:"Chart",staticStyle:{height:"25vh"},attrs:{label:t.formatAllDatesQA(t.labelQA),"chart-data":t.percentDataQA,title:"Persentase Data (%)"}})],1)]),e("div",{staticClass:"comShadow",staticStyle:{"border-radius":"15px"}},[e("div",{staticClass:"box-sm border mx-auto bg-white",staticStyle:{"border-radius":"15px"}},[t._m(6),e("TotalChartBarFiltered",{tag:"Chart",staticStyle:{height:"25vh"},attrs:{label:t.formatAllDatesQA(t.labelQA),"chart-data":t.mtcDataQA,title:"Jumlah Gangguan"}})],1)])]):t._e()])},Me=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title text-primary",attrs:{id:"taksasiDataLabel"}},[t._v(" Taksasi Data ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" Close ")]),e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Taksasi ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title text-success",attrs:{id:"approveTaksasiLabel"}},[t._v(" Approve Taksasi ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" Close ")]),e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit","data-bs-dismiss":"modal"}},[t._v(" Approve ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h6",{staticClass:"px-2 pt-2"},[t._v(" Jumlah Data ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h6",{staticClass:"px-2 pt-2"},[t._v(" Data Persentase (%) ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h6",{staticClass:"px-2"},[t._v(" Jumlah Gangguan ")])])}],Ne={name:"LineChartFiltered",extends:Nt["b"],props:{label:Array,chartData:Array,legend:Boolean,title1:String,title2:String,title3:String,type1:Array},data:function(){return{gradients:[null,null,null],mixtypes:["","",""],gradient:null}},mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(0,"rgba(104, 192, 255, 1)"),this.gradient.addColorStop(.5,"rgba(104, 192, 255, 0)"),this.gradient.addColorStop(.6,"rgba(59, 130, 246, 0.08)"),this.gradient.addColorStop(1,"rgba(59, 130, 246, 0.08)"),this.configureGradients(),this.configureMixtypes();var t=[{label:this.title1,type:this.mixtypes[0],yAxisID:"A",borderColor:"rgba(99, 102, 241,1)",pointBackgroundColor:"rgba(35,137,218, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:this.gradients[0],data:this.chartData[0],pointRadius:0,lineTension:0},{label:this.title2,type:this.mixtypes[1],yAxisID:"A",borderColor:"rgba(34,139,34,1)",pointBackgroundColor:"rgba(34,139,34,1)",borderWidth:2,pointBorderColor:"rgba(34,139,34,1)",backgroundColor:this.gradients[1],data:this.chartData[1],pointRadius:0,lineTension:0},{label:this.title3,type:this.mixtypes[2],yAxisID:"A",borderColor:"rgba(241, 99, 102,1)",pointBackgroundColor:"rgba(241, 99, 102,1)",borderWidth:2,pointBorderColor:"rgba(241, 99, 102,1)",backgroundColor:this.gradients[2],data:this.chartData[2],pointRadius:1,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,spanGaps:!0,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},methods:{updateChart:function(){this.$data._chart.destroy();var t=[{label:this.title1,type:this.mixtypes[0],yAxisID:"A",borderColor:"rgba(99, 102, 241,1)",pointBackgroundColor:"rgba(35,137,218, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:this.gradients[0],data:this.chartData[0],pointRadius:0,lineTension:0},{label:this.title2,type:this.mixtypes[1],yAxisID:"A",borderColor:"rgba(34,139,34,1)",pointBackgroundColor:"rgba(34,139,34,1)",borderWidth:2,pointBorderColor:"rgba(34,139,34,1)",backgroundColor:this.gradients[1],data:this.chartData[1],pointRadius:0,lineTension:0},{label:this.title3,type:this.mixtypes[2],yAxisID:"A",borderColor:"rgba(241, 99, 102,1)",pointBackgroundColor:"rgba(241, 99, 102,1)",borderWidth:2,pointBorderColor:"rgba(241, 99, 102,1)",backgroundColor:this.gradients[2],data:this.chartData[2],pointRadius:1,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},configureGradients:function(){for(var t=["0,128,128","35,137,218","27,105,167"],a=0;a<this.gradients.length;a++)this.gradients[a]=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradients[a].addColorStop(1,"rgba(".concat(t[a],", 0.08)"))},configureMixtypes:function(){for(var t=[this.type1,this.type2,this.type3],a=0;a<this.mixtypes.length;a++)"LineChart"===t[a]?this.mixtypes[a]="line":"BarChart"===t[a]&&(this.mixtypes[a]="bar")}},watch:{label:"updateChart",chartData:"updateChart"}},Qe=Ne,Be=Object(l["a"])(Qe,oa,la,!1,null,null,null),Ye=Be.exports,Ie={name:"LineChartFiltered",extends:Nt["b"],props:{label:Array,chartData:Array,legend:Boolean,title1:String,title2:String,type1:Array},data:function(){return{gradients:[null,null],mixtypes:["",""],gradient:null}},mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(0,"rgba(253, 188, 92, 0.9)"),this.gradient.addColorStop(.5,"rgba(253, 188, 92, 0)"),this.gradient.addColorStop(.6,"rgba(255, 165, 0, 0.08)"),this.gradient.addColorStop(1,"rgba(255, 165, 0, 0.08)"),this.configureGradients(),this.configureMixtypes();var t=[{label:this.title1,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(253, 188, 92,1)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:this.gradient,data:this.chartData[0],pointRadius:0,lineTension:0},{label:this.title2,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(34, 123, 148,1)",pointBackgroundColor:"rgba(34, 123, 148,1)",borderWidth:2,pointBorderColor:"rgba(34, 123, 148,1)",backgroundColor:this.gradients[1],data:this.chartData[1],pointRadius:1,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,spanGaps:!0,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!1},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},methods:{updateChart:function(){this.$data._chart.destroy();var t=[{label:this.title1,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(253, 188, 92,1)",pointBackgroundColor:"rgba(253, 188, 92, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:this.gradient,data:this.chartData[0],pointRadius:0,lineTension:0},{label:this.title2,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(34, 123, 148,1)",pointBackgroundColor:"rgba(34, 123, 148,1)",borderWidth:2,pointBorderColor:"rgba(34, 123, 148,1)",backgroundColor:this.gradients[1],data:this.chartData[1],pointRadius:1,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!1},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},configureGradients:function(){for(var t=["0,128,128","35,137,218","27,105,167"],a=0;a<this.gradients.length;a++)this.gradients[a]=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradients[a].addColorStop(1,"rgba(".concat(t[a],", 0.08)"))},configureMixtypes:function(){for(var t=[this.type1,this.type2,this.type3],a=0;a<this.mixtypes.length;a++)"LineChart"===t[a]?this.mixtypes[a]="line":"BarChart"===t[a]&&(this.mixtypes[a]="bar")}},watch:{label:"updateChart",chartData:"updateChart"}},Ee=Ie,Fe=Object(l["a"])(Ee,ca,da,!1,null,null,null),He=Fe.exports,Ve={name:"TotalChartBarFiltered",extends:Nt["a"],props:{label:Array,chartData:Array,legend:Boolean,title1:String,type1:Array},data:function(){return{gradients:[null],mixtypes:[""]}},mounted:function(){this.configureGradients(),this.configureMixtypes();var t=[{label:!1,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(253, 188, 92,1)",pointBackgroundColor:"rgba(35,137,218, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:"rgba(253, 188, 92,0.7)",data:this.chartData,pointRadius:0,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,spanGaps:!0,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!0},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},methods:{updateChart:function(){this.$data._chart.destroy();var t=[{label:this.title1,type:this.mixtype1,yAxisID:"A",borderColor:"rgba(253, 188, 92,1)",pointBackgroundColor:"rgba(35,137,218, 0.9)",borderWidth:2,pointBorderColor:"white",backgroundColor:"rgba(253, 188, 92,0.7)",data:this.chartData,pointRadius:0,lineTension:0}];this.renderChart({labels:this.label,datasets:t},{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{id:"A",position:"left",ticks:{beginAtZero:!1},gridLines:{color:"rgba(151,151,151,0.2)"}}],xAxes:[{ticks:{display:!0,callback:function(t,a,e){return 0===a||a===e.length-1?t:""},autoSkip:!1,maxRotation:0,minRotation:0,fontColor:"#6c757d"},gridLines:{color:!1}}]}})},configureGradients:function(){for(var t=["0,128,128","35,137,218","27,105,167"],a=0;a<this.gradients.length;a++)this.gradients[a]=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradients[a].addColorStop(1,"rgba(".concat(t[a],", 0.08)"))},configureMixtypes:function(){for(var t=[this.type1,this.type2,this.type3],a=0;a<this.mixtypes.length;a++)"LineChart"===t[a]?this.mixtypes[a]="line":"BarChart"===t[a]&&(this.mixtypes[a]="bar")}},watch:{label:"updateChart",chartData:"updateChart"}},Ge=Ve,Je=Object(l["a"])(Ge,ua,ma,!1,null,null,null),Ze=Je.exports,qe={name:"ChartData",props:["debitData","totalData","gainData","gainTotal","label","station","ava_width","stationQA","percentDataQA","sumDataQA","labelQA","mtcDataQA","profile"],components:{TotalChartBarFiltered:Ze,LineChartFiltered:Ye,TotalChartFiltered:He},data:function(){return{total_s:null,taksasi:!1,taksasiType:[!1,!0],startDate:null,endDate:null,loadingTaksasi:!1}},methods:{taksasiRange:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingTaksasi=!0,e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,a.next=5,f.a.get("".concat(t.$baseURL,"/pdam/taksasi/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s}}).then((function(a){200==a.status&&(t.taksasiSuccess(),t.loadingTaksasi=!1)})).catch((function(t){console.log(t)}));case 5:case"end":return a.stop()}}),a)})))()},approveRange:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.startDate?Kt()(t.startDate).format("YYYY-MM-DD HH:mm"):null,s=t.endDate?Kt()(t.endDate).format("YYYY-MM-DD HH:mm"):null,a.next=4,f.a.get("".concat(t.$baseURL,"/pdam/approve_taksasi/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)},params:{from:e,until:s}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));case 4:case"end":return a.stop()}}),a)})))()},taksasiSuccess:function(){this.$swal({position:"top-end",width:"300px",icon:"success",title:"Taksasi berhasil",showConfirmButton:!1,timer:1500})},formatDate:function(t){try{var a=new Date(t);if(isNaN(a))throw new Error("Invalid date");var e={day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"};return new Intl.DateTimeFormat("en-GB",e).format(a)}catch(s){return console.error("Error parsing date:",s),t}},formatAllDates:function(t){return t.map(this.formatDate)},formatDateQA:function(t){try{var a=new Date(t);if(isNaN(a))throw new Error("Invalid date");var e={day:"2-digit",month:"short",year:"numeric",timeZone:"Asia/Jakarta"};return new Intl.DateTimeFormat("en-GB",e).format(a)}catch(s){return console.error("Error parsing date:",s),t}},formatAllDatesQA:function(t){return t.map(this.formatDateQA)}},created:function(){this.extractUserInfo()}},We=qe,Ke=(e("82a4"),Object(l["a"])(We,Ue,Me,!1,null,"08cf6bab",null)),Xe=Ke.exports,ts={name:"DataDetail",components:{Header:G,Footer:we,TableData:Oe,ChartData:Xe},data:function(){return{station:[],stationQA:[],filteredData:[],filteredDataQA:[],loading_i:!0,status:[],ava_width:null,msg:"Fetching data, please wait...",e_code:null,user_balai:null,station_balai:null,profile:null}},computed:{debitData:function(){return this.filteredData.map((function(t){var a,e;return null!==(a=null===(e=t.sensor_data[0])||void 0===e?void 0:e.value)&&void 0!==a?a:null})).reverse()},totalData:function(){return this.filteredData.map((function(t){var a,e;return null!==(a=null===(e=t.sensor_data[1])||void 0===e?void 0:e.value)&&void 0!==a?a:null})).reverse()},gainData:function(){return this.filteredData.map((function(t){var a,e;return null!==(a=null===(e=t.sensor_data[2])||void 0===e?void 0:e.value)&&void 0!==a?a:null})).reverse()},gainTotal:function(){return this.filteredData.map((function(t){var a,e;return null!==(a=null===(e=t.sensor_data[3])||void 0===e?void 0:e.value)&&void 0!==a?a:null})).reverse()},label:function(){return this.filteredData.map((function(t){return t.time})).reverse()},percentDataQA:function(){return this.filteredDataQA.map((function(t){return t.percentage})).reverse()},sumDataQA:function(){return this.filteredDataQA.map((function(t){return t.sum})).reverse()},mtcDataQA:function(){return this.filteredDataQA.map((function(t){return t.maintenance})).reverse()},labelQA:function(){return this.filteredDataQA.map((function(t){return t.date})).reverse()}},methods:{updateFilteredData:function(t){this.filteredData=t},updateFilteredDataQA:function(t){this.filteredDataQA=t},formatNumber:function(t){return t=Number(t).toString(),t.replace(/\B(?=(\d{3})+(?!\d))/g,",")},loadData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/pdam/station_data/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.station=a.data.data[0],200==a.status&&(t.loading_i=!1)})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?"No sensor data found."==a.response.data.message?(t.station=[],t.loading_i=!1):console.error("Error msg: ",a.response.data.message):t.logoutUser()}));case 2:case"end":return a.stop()}}),a)})))()},loadDataQA:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/pdam/QA/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){200==a.status&&(t.loading_i=!1,t.stationQA=a.data[0].data)})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 2:case"end":return a.stop()}}),a)})))()},loadProfile:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/pdam/station/").concat(t.$route.params.id,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){200==a.status&&(t.profile=a.data.data)})).catch((function(a){t.e_code=a.response.status,t.msg="An error occurred on the server. Please try again later."}));case 2:case"end":return a.stop()}}),a)})))()},reloaded:function(){var t=localStorage.getItem("hasReloaded");t?localStorage.removeItem("hasReloaded"):(localStorage.setItem("hasReloaded","true"),this.$router.go(0))}},mounted:function(){this.ava_width=screen.availWidth,this.loadProfile()},created:function(){this.extractUserInfo(),"QA"!==this.role?this.loadData():this.loadDataQA()}},as=ts,es=(e("5448"),Object(l["a"])(as,he,ge,!1,null,"6c244a5a",null)),ss=es.exports,is=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header"),e("div",{staticClass:"mobile-width d-flex justify-content-between align-items-center"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")])]),e("div",{staticClass:"mobile-width"},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"subTitle"},[t._v("Daftar User")]),e("div",["SuperAdmin"===t.role||"Admin"===t.role?e("router-link",{staticClass:"btn btn-primary float-right my-2",staticStyle:{padding:"5px 10px"},attrs:{to:{name:"AddUser"},type:"button"}},[t._v("Tambah Data")]):t._e()],1)]),e("dataset",{attrs:{"ds-data":t.users,"ds-sortby":t.sortBy,"ds-search-in":["user","created_by"]},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return[e("div",{attrs:{"data-page-count":s.dsPagecount}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._l(t.cols,(function(a,s){return e("th",{key:a.field,staticClass:"thLight",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"1.5rem"}})]):t._e(),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.rowIndex;return[e("tr",[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(s.username))]),e("td",[t._v(t._s(s.role_name))]),"SuperAdmin"==s.role_name?e("td",[t._v(t._s(s.is_staff))]):e("td"),null!==s.balai&&"Admin"==s.role_name?e("td",[t._v(t._s(s.balai.balai_name))]):e("td"),e("td",[t._v(t._s(s.created_by))]),e("td",[e("span",[e("button",{staticClass:"btn btn-danger btn-sm mx-1",attrs:{type:"button"},on:{click:function(a){return t.deleteData(s.id)}}},[t._v(" Delete ")])])])])]}}],null,!0)})],1)])])]),e("div",{staticClass:"d-flex flex-md-row flex-row justify-content-end align-items-center"},[e("button",{staticClass:"btn btn-sm btn-light mx-1",attrs:{disabled:!t.prevPage},on:{click:t.loadPrevPage}},[t._v("Previous")]),t._l(t.totalPages,(function(a){return e("span",{key:a},[e("button",{class:["btn btn-sm",a===t.currentPage?"btn-primary":"btn-light"],on:{click:function(e){return t.loadData(a)}}},[t._v(" "+t._s(a)+" ")])])})),e("button",{staticClass:"btn btn-sm btn-light mx-1",attrs:{disabled:!t.nextPage},on:{click:t.loadNextPage}},[t._v("Next")])],2)]}}])})],1)],1)},ns=[],rs={name:"User",components:{Header:G,Dataset:Ga["a"],DatasetItem:Ja["a"]},data:function(){return{balais:[],loading_i:!0,provinsis:[],userList:[],role:"",users:[],cols:[{name:"Username",field:"user"}],colSuper:[{name:"Role"},{name:"CRUD"},{name:"Produksi"}],colCreated:[{name:"Created by"},{name:"Delete"}],currentPage:1,totalPages:0,nextPage:null,prevPage:null,maxPerPage:10}},computed:{sortBy:function(){return this.cols.reduce((function(t,a){return a.sort&&("asc"===a.sort?t.push(a.field):t.push("-"+a.field)),t}),[])}},methods:{toggleNav:function(){this.$parent.$emit("toggleNav")},click:function(t,a){var e,s=this.cols[a];t.shiftKey||this.cols.forEach((function(t){t.field!==s.field&&(t.sort="")})),s.sort||(e="asc"),"desc"===s.sort&&(e=t.shiftKey?"":"asc"),"asc"===s.sort&&(e="desc"),s.sort=e},loadHeader:function(){var t,a;"SuperAdmin"==this.role&&(a=this.cols).push.apply(a,Object(Pt["a"])(this.colSuper));(t=this.cols).push.apply(t,Object(Pt["a"])(this.colCreated))},loadData:function(t){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.loading_i=!0,e.next=3,f.a.get("".concat(a.$baseURL,"/user/?page=").concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){a.users=e.data.results,a.nextPage=e.data.next,a.prevPage=e.data.previous,a.currentPage=t,a.totalPages=Math.ceil(e.data.count/e.data.max_per_page),200==e.status&&(a.loading_i=!1)}));case 3:case"end":return e.stop()}}),e)})))()},loadNextPage:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.nextPage){a.next=4;break}return e=t.currentPage+1,a.next=4,t.loadData(e);case 4:case"end":return a.stop()}}),a)})))()},loadPrevPage:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.prevPage){a.next=4;break}return e=t.currentPage-1,a.next=4,t.loadData(e);case 4:case"end":return a.stop()}}),a)})))()},delete:function(t){var a=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("".concat(a.$baseURL,"/user/").concat(t,"/"),{headers:{Authorization:"Bearer ".concat(a.token)}});case 3:if(s=e.sent,204!=s.status){e.next=7;break}return e.next=7,a.loadData(a.currentPage);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error deleting data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteData:function(t){var a=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&a.delete(t)}))}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.extractUserInfo(),t.loadHeader(),a.next=4,t.loadData(t.currentPage);case 4:case"end":return a.stop()}}),a)})))()},mounted:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("".concat(t.$baseURL,"/user/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.userList=a.data.results})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 2:case"end":return a.stop()}}),a)})))()}},os=rs,ls=(e("afb6"),e("7824"),Object(l["a"])(os,is,ns,!1,null,"0ac296ac",null)),cs=ls.exports,ds=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header"),e("div",{staticClass:"mobile-width"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")]),e("form",{on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"row my-2"},[e("div",{staticClass:"col-md subTitle"},[t._v("Tambah User Baru")]),e("div",{staticClass:"col-md d-flex justify-content-end"},[e("router-link",{staticClass:"btn btn-light border mx-4 bg-white",attrs:{to:{name:"User"},type:"button"}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Simpan")])],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data User")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md pb-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputNama"}},[t._v("Username*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userData,expression:"userData"}],staticClass:"form-control",attrs:{type:"text",id:"inputNama",placeholder:"Nama",required:""},domProps:{value:t.userData},on:{input:function(a){a.target.composing||(t.userData=a.target.value)}}})])]),e("div",{staticClass:"col-md pb-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputPass"}},[t._v("Password*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password",required:"",attr:"",id:"inputPass"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})])])])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Data Produksi")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"col-md pb-3"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Role*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.roleUser,expression:"roleUser"}],staticClass:"form-select",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.roleUser=a.target.multiple?e:e[0]}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Pilih Role")]),t._l(t.roles,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.role)+" ")])}))],2)]),2==t.roleUser?e("div",{staticClass:"col-md pb-3"},[e("label",{attrs:{for:"floatingInput"}},[t._v("Produksi*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.produksiUser,expression:"produksiUser"}],staticClass:"form-select",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.produksiUser=a.target.multiple?e:e[0]}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Pilih Produksi")]),t._l(t.produksis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.balai_name)+" ")])}))],2)]):1==t.roleUser?e("div",{staticClass:"col-md pb-3"},[e("label",{attrs:{for:"floatingInput"}},[t._v("CRUD*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.crudStaff,expression:"crudStaff"}],staticClass:"form-select",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.crudStaff=a.target.multiple?e:e[0]}}},t._l(t.crudOp,(function(a,s){return e("option",{key:s,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})),0)]):t._e()])])])])])])],1)},us=[],ms={name:"AddUser",components:{Header:G},data:function(){return{produksis:[],roles:[],crudOp:[!1,!0],crudStaff:!1,userData:"",password:"",roleUser:"",produksiUser:1,email:"q9@test.test",first_name:"x",last_name:"x"}},methods:{submitData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.post("".concat(t.$baseURL,"/user/"),{username:t.userData,password:t.password,balai:t.produksiUser,email:t.email,first_name:t.first_name,last_name:t.last_name,role:t.roleUser,is_staff:t.crudStaff},{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){201==a.status&&t.$router.push({name:"User"})}));case 2:case"end":return a.stop()}}),a)})))()},submit:function(){this.$swal({position:"top-end",width:"300px",icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),this.submitData()}},created:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.extractUserInfo(),a.next=3,f.a.get("".concat(t.$baseURL,"/balai/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.produksis=a.data.data})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 3:return a.next=5,f.a.get("".concat(t.$baseURL,"/role/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.roles=a.data.data})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 5:case"end":return a.stop()}}),a)})))()},mounted:function(){return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},ps=ms,fs=(e("3329"),Object(l["a"])(ps,ds,us,!1,null,"37547292",null)),vs=fs.exports,hs=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header"),e("div",{staticClass:"mobile-width d-flex justify-content-between align-items-center"},[e("div",{staticClass:"bwsTitle mobile-top"},[t._v(" "+t._s(t.$app_title)+" ")])]),e("div",{staticClass:"mobile-width"},[t._m(0),e("dataset",{attrs:{"ds-data":t.notifs,"ds-sortby":t.sortBy,"ds-search-in":["station_name","message"]},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.ds;return[e("div",{attrs:{"data-page-count":s.dsPagecount}},[e("dataset-show",{staticClass:"d-none",attrs:{"ds-show-entries":15}}),e("dataset-search",{attrs:{"ds-search-placeholder":" Search..."}})],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-responsive text-nowrap text-center table-borderless bg-white"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._l(t.cols,(function(a,s){return e("th",{key:a.field,staticClass:"thLight",class:["sort",a.sort],on:{click:function(a){return t.click(a,s)}}},[t._v(" "+t._s(a.name)+" "),e("i",{staticClass:"gg-select float-right"})])}))],2)]),t.loading_i?e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e("i",{staticClass:"zmdi zmdi-spinner zmdi-hc-spin",staticStyle:{"font-size":"1.5rem"}})]):t._e(),e("dataset-item",{attrs:{tag:"tbody"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row,i=a.rowIndex;return[e("tr",[e("td",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),e("td",[t._v(t._s(t.formatDate(s.time)))]),e("td",[t._v(t._s(t.formatTime(s.time)))]),e("td",{staticClass:"px-2"},[t._v(t._s(s.station_name))]),e("td",{staticClass:"px-2"},[e("small",[t._v(t._s(s.message))])]),e("td",[t._v(t._s(s.debit_value)+" l/s")]),e("td",[t._v(t._s(s.power)+"v")])])]}}],null,!0)})],1)])])]),e("div",{staticClass:"d-flex flex-md-row flex-column justify-content-between align-items-center"},[e("dataset-info",{staticClass:"mb-2 mb-md-0"}),e("dataset-pager")],1)]}}])})],1)],1)},gs=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("div",{staticClass:"subTitle"},[t._v("Notifikasi")])])}],bs=e("c352"),_s={name:"Notification",components:{Header:G,Dataset:Ga["a"],DatasetItem:Ja["a"],DatasetInfo:Za["a"],DatasetPager:qa["a"],DatasetSearch:Wa["a"],DatasetShow:bs["a"]},data:function(){return{notifs:[],loading_i:!0,balais:[],role:null,station:0,balai:null,nama_pos:"",colSuper:[{name:"Tanggal"},{name:"Waktu"},{name:"Nama Stasiun"},{name:"Message"},{name:"Debit"},{name:"Power"}],userStationList:[]}},computed:{sortBy:function(){return this.cols.reduce((function(t,a){return a.sort&&("asc"===a.sort?t.push(a.field):t.push("-"+a.field)),t}),[])}},methods:Object(q["a"])(Object(q["a"])({},Object(m["b"])(["updateUserStationList"])),{},{click:function(t,a){var e,s=this.cols[a];t.shiftKey||this.cols.forEach((function(t){t.field!==s.field&&(t.sort="")})),s.sort||(e="asc"),"desc"===s.sort&&(e=t.shiftKey?"":"asc"),"asc"===s.sort&&(e="desc"),s.sort=e},loadData:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"SuperAdmin"==t.role?t.cols=t.colSuper:console.log(t.cols),a.next=3,f.a.get("".concat(t.$baseURL,"/pdam/telegram_notification/"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(a){t.notifs=a.data.data,200==a.status&&(t.loading_i=!1)})).catch((function(a){!a.response||401!==a.response.status&&403!==a.response.status?console.error("Error msg: ",a):t.logoutUser()}));case 3:case"end":return a.stop()}}),a)})))()},formatDate:function(t){var a=new Date(t),e={day:"numeric",month:"short",year:"numeric"};return new Intl.DateTimeFormat("en-GB",e).format(a)},formatTime:function(t){var a=new Date(t),e={hour:"2-digit",minute:"2-digit",hour12:!1};return new Intl.DateTimeFormat("en-GB",e).format(a)}}),created:function(){this.extractUserInfo(),this.loadData()}},ys=_s,Cs=(e("e6f8"),e("123d"),Object(l["a"])(ys,hs,gs,!1,null,"0e4dd26c",null)),xs=Cs.exports;s["a"].use(u["a"]);var ws=function(t,a,e){S.getters.isAuthenticated?e("/"):e()},Ss=function(t,a,e){S.getters.isAuthenticated?e():e("/login")},Ds=function(t){return function(a,e,s){var i=S.getters.userRole||localStorage.getItem("userRole");S.getters.isAuthenticated&&i===t?s():s("/")}},As=[];As.push({path:"/",component:xa,name:"Home",beforeEnter:Ss}),As.push({path:"/login",component:Ra,name:"Login",beforeEnter:ws},{path:"/logout",component:Fa,name:"Logout",beforeEnter:Ss},{path:"/station",component:ae,name:"Station",beforeEnter:Ss},{path:"/station/add",component:ce,name:"AddStation",beforeEnter:Ds("SuperAdmin")},{path:"/station/update/:id",name:"UpdateStation",component:ve,beforeEnter:Ds("SuperAdmin")},{path:"/station/data/:id",name:"DataStation",component:ss,beforeEnter:Ss},{path:"/user",component:cs,name:"User",beforeEnter:Ds("SuperAdmin")},{path:"/user/add",component:vs,name:"AddUser",beforeEnter:Ds("SuperAdmin")},{path:"/notification",component:xs,name:"Notification",beforeEnter:Ds("SuperAdmin")},{path:"/:pathMatch(.*)*",component:Na});var ks=new u["a"]({mode:"history",base:"/",routes:As}),zs=ks,js=(e("f9e3"),e("f9d5")),Rs=e.n(js),Ps=(e("4413"),e("6cc5"),e("e11e")),Ls=(e("f907"),e("ec45"));e("411c"),e("4989");s["a"].component("DatePicker",Ls["a"]),s["a"].config.productionTip=!1,s["a"].prototype.$baseURL="https://flowmeter.pdam-sby.go.id/api",s["a"].prototype.$app_title=document.title,s["a"].mixin({methods:{extractUserInfo:function(){var t=localStorage.getItem("user-daas")||"{}";this.user=JSON.parse(t),this.balai=this.user.balai.id,this.produksi=this.user.balai.balai_name,this.username=this.user.username,this.role=this.user.role.role_name,this.token=this.user.tokens.access,this.is_staff=this.user.is_staff},logoutUser:function(){localStorage.clear(),localStorage.removeItem("access"),localStorage.removeItem("user-daas"),this.$router.push({name:"Home"}),window.location.reload(),window.location.reload()}}}),s["a"].config.productionTip=!1,s["a"].prototype.moment=Kt.a,s["a"].use(Rs.a),delete Ps["Icon"].Default.prototype._getIconUrl,Ps["Icon"].Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")}),new s["a"]({router:zs,store:S,render:function(t){return t(d)}}).$mount("#app")},"5c03":function(t,a,e){},"5ec2":function(t,a,e){},6535:function(t,a,e){},"69e0":function(t,a,e){"use strict";e("915d")},"6aed":function(t,a,e){t.exports=e.p+"img/user.0043894f.svg"},"6edf":function(t,a,e){"use strict";var s=e("e468"),i=e.n(s);e.d(a,"default",(function(){return i.a}))},"6eea":function(t,a,e){},"6fca":function(t,a,e){},7332:function(t,a,e){},"73f2":function(t,a,e){"use strict";e("190c")},"74e8":function(t,a,e){},7542:function(t,a,e){},7824:function(t,a,e){"use strict";e("7332")},"7e3f":function(t,a,e){},8113:function(t,a,e){},8265:function(t,a,e){t.exports=e.p+"img/logo-pdam.d8b2df04.png"},"82a4":function(t,a,e){"use strict";e("9776")},"82b2":function(t,a,e){"use strict";e("74e8")},"85ec":function(t,a,e){},"87e0":function(t,a,e){},"8a01":function(t,a,e){"use strict";e("5ec2")},"8e71":function(t,a,e){t.exports=e.p+"img/404.d04193f3.svg"},"8ed3":function(t,a,e){t.exports=e.p+"img/edit.91d3ffb4.svg"},"909a":function(t,a,e){},"914d":function(t,a,e){},"915d":function(t,a,e){},9162:function(t,a,e){"use strict";e("e722")},"91b0":function(t,a,e){"use strict";e("0b4f")},"95f2":function(t,a,e){},9619:function(t,a,e){t.exports=e.p+"img/lock.228c415b.svg"},"969e":function(t,a,e){t.exports=e.p+"img/pie-chart.8ec40c60.svg"},9776:function(t,a,e){},9814:function(t,a,e){"use strict";e("a382")},"9f10":function(t,a,e){t.exports=e.p+"img/s3.d70f65ca.svg"},"9fb3":function(t,a,e){"use strict";e("e4a0")},a07d:function(t,a,e){},a239:function(t,a,e){t.exports=e.p+"img/s2.5e10294b.svg"},a382:function(t,a,e){},a5c5:function(t,a,e){},a5f6:function(t,a,e){t.exports=e.p+"img/mtc.3fcbac23.svg"},a722:function(t,a,e){t.exports=e.p+"img/log-in.a77ac0c6.svg"},ab55:function(t,a,e){t.exports=e.p+"img/bg-pdam.5be7db63.png"},aeea:function(t,a,e){"use strict";e("a07d")},afb6:function(t,a,e){"use strict";e("b30f")},b30f:function(t,a,e){},b447:function(t,a,e){t.exports=e.p+"img/ok.a6b34453.svg"},b8cd:function(t,a,e){"use strict";e("e301")},c6ba:function(t,a,e){"use strict";e("a5c5")},c9bd:function(t,a,e){"use strict";e("7e3f")},cbf5:function(t,a,e){t.exports=e.p+"img/dashboard.41361a8d.svg"},cc7b:function(t,a,e){t.exports=e.p+"img/marr.fa3d6619.svg"},d0c4:function(t,a,e){"use strict";e("8113")},d294:function(t,a,e){"use strict";e("909a")},e301:function(t,a,e){},e468:function(t,a,e){t.exports={wrap:"MarqueeText_wrap_2urIu",content:"MarqueeText_content_1yUP0",text:"MarqueeText_text_3doey",animation:"MarqueeText_animation_1mO9k",paused:"MarqueeText_paused_1RyIy"}},e491:function(t,a,e){},e4a0:function(t,a,e){},e6f8:function(t,a,e){"use strict";e("6fca")},e722:function(t,a,e){},ed34:function(t,a,e){},f0ec:function(t,a,e){t.exports=e.p+"img/notification.cbd20951.svg"},fcc0:function(t,a,e){},fe62:function(t,a,e){t.exports=e.p+"img/s1.13cd2296.svg"}});
//# sourceMappingURL=app.4ff5e3e9.js.map